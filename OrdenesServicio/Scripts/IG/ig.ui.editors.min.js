(function(){var a=false,b=/xyz/.test(function(){xyz()})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(c){var f=this.prototype,h,g;a=true;h=new this();a=false;function e(j,i){return function(){var k=this._super,l;this._super=f[j];l=i.apply(this,arguments);this._super=k;return l}}for(g in c){if(c.hasOwnProperty(g)){h[g]=typeof c[g]==="function"&&typeof f[g]==="function"&&b.test(c[g])?e(g,c[g]):c[g]}}function d(){if(!a&&this.init){this.init.apply(this,arguments)}}d.prototype=h;d.constructor=d;d.extend=arguments.callee;return d}}());(function(a){a.fn.startsWith=function(b){return !this[0].innerHTML.indexOf(b)};a.ig=a.ig||{};a.ajaxQueue=function(b,d){var c;if(typeof document.ajaxQueue==="undefined"){document.ajaxQueue={queue:{}}}if(typeof document.ajaxQueue.queue[b]==="undefined"){document.ajaxQueue.queue[b]=[]}if(typeof d==="undefined"){return}c=d.complete;d.complete=function(e,f){document.ajaxQueue.queue[b].shift();if(typeof c!=="undefined"){c(e,f)}if(document.ajaxQueue.queue[b].length>0){a.ajax(document.ajaxQueue.queue[b][0])}};document.ajaxQueue.queue[b].push(d);if(document.ajaxQueue.queue[b].length===1){a.ajax(document.ajaxQueue.queue[b][0])}};a.ig.formatter=function(c,D,b){var q,G,u,z,p,B,j,F,H,l,A,E,C,x,g,f,r,I,w,o,v,k=c&&c.getTime,t=a.ig.regional.defaults;if(b==="bool"){return c?"ui-icon-check":"ui-iggrid-checkboxempty"}if(!c&&c!==0&&c!==false){return"&nbsp;"}if(D==="date"||k){if(!c){return"&nbsp;"}if(!k){return c}if(!(H=t[(b&&b!=="null"&&b!=="undefined")?b+"Pattern":"datePattern"])){H=b}G=c.getFullYear();z=c.getMonth()+1;k=c.getDate();u=c.getHours();q=c.getMinutes();p=c.getSeconds();B=c.getMilliseconds();H=H.replace("MMMM","\x01").replace("MMM","\x02").replace("dddd","\x03").replace("ddd","\x04");if(H.indexOf("t")>=0){if(!(j=(u>=12)?t.pm:t.am)){j=" "}if(H.indexOf("tt")>=0){H=H.replace("tt","t")}else{if(j.length>1){j=j.substring(0,1)}}H=H.replace("t","\x05")}if(H.indexOf("h")>=0&&u>12){u-=12}H=H.replace(/H/g,"h");H=H.replace("yyyy",G).replace("yy",((G=G%100)<10)?"0"+G:G).replace("y",G%100).replace("MM",(z<10)?"0"+z:z).replace("M",z);H=H.replace("dd",(k<10)?"0"+k:k).replace("d",k);H=H.replace("hh",(u<10)?"0"+u:u).replace("h",u).replace("mm",(q<10)?"0"+q:q).replace("m",q).replace("ss",(p<10)?"0"+p:p).replace("s",p);H=H.replace("fff",(B<10)?"00"+B:((B<100)?"0"+B:B)).replace("ff",((B=Math.round(B/10))<10)?"0"+B:B).replace("f",Math.round(B/100));H=H.replace("\x01",t.monthNames[z-1]).replace("\x02",t.monthNamesShort[z-1]).replace("\x05",j);H=H.replace("\x03",t.dayNames[c.getDay()]).replace("\x04",t.dayNamesShort[c.getDay()]);return H}if(!(k=b==="double")){if(!(I=b===(f="currency"))){if(!(w=b===(r="percent"))){v=b==="int"}}}A=typeof c==="number";if(k||A||v||I||w||D==="number"){if(!A){c=parseFloat(c.replace("(","-").replace(/[^0-9\-eE\.\+]/gm,""))}if(isNaN(c)){return"&nbsp;"}o=I?f:(w?r:"numeric");if(!(H=t[o+((c<0)?"Negative":"Positive")+"Pattern"])){H="n"}l=b?b.length:0;if(l>0&&((p=b.charAt(0))==="0"||p==="#")){q=z=0;E=b.indexOf(".");if(E>0){z=l-1-E;while(++E<l){if(b.charAt(E)!=="0"){break}q++}}}else{if(!(q=t[o+"MinDecimals"])){q=0}if(k){z=999}else{z=t[o+"MaxDecimals"];z=(z&&!v)?z:0}}if(c<0){c=-c}c=(z===999)?c.toString(10):c.toFixed(z);if((v=c.indexOf("E"))<0){v=c.indexOf("e")}F="";if(v>0){F=c.substring(v);c=c.substring(0,v)}E=c.indexOf(".");l=c.length;v=0;while(E>0&&z>q+v&&c.charAt(l-1-v)==="0"){v++}if(v>0){c=c.substring(0,l-=v)}if(E===l-1){c=c.substring(0,E)}if(E>0){l=E}p=t[o+"DecimalSeparator"];if(p){c=c.replace(".",p)}p=t[o+"GroupSeparator"];g=p?t[o+"Groups"]:"";C=x=(g.length>0)?g[v=0]:0;while(C>0&&--l>0){if(--C===0){c=c.substring(0,l)+p+c.substring(l);if(!(C=g[++v])||C<1){C=x}else{x=C}}}if(!(p=t[o+"Symbol"])){p=""}return H.replace("-",t.negativeSign).replace("n",c+F).replace("$",p)}if(b){if(b.indexOf(p="{0}")>=0){return b.replace(p,c)}if(b.indexOf(p="[0]")>=0){return b.replace(p,c)}}return(c||c===0)?c:"&nbsp;"};a.ig._regional={monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],am:"AM",pm:"PM",datePattern:"M/d/yyyy",dateLongPattern:"dddd, MMMM dd, yyyy",dateTimePattern:"M/d/yyyy h:mm tt",timePattern:"h:mm tt",timeLongPattern:"h:mm:ss tt",negativeSign:"-",numericNegativePattern:"-$n",numericDecimalSeparator:".",numericGroupSeparator:",",numericGroups:[3],numericMaxDecimals:2,numericMinDecimals:0,currencyPositivePattern:"$n",currencyNegativePattern:"$(n)",currencySymbol:"$",currencyDecimalSeparator:".",currencyGroupSeparator:",",currencyGroups:[3],currencyMaxDecimals:2,currencyMinDecimals:2,percentPositivePattern:"n$",percentNegativePattern:"-n$",percentSymbol:"%",percentDecimalSeparator:".",percentGroupSeparator:",",percentGroups:[3],percentDisplayFactor:100,percentMaxDecimals:2,percentMinDecimals:2};a.ig.regional={defaults:a.ig._regional};a.ig.setRegionalDefault=function(b){if(a.ui.igEditor){a.ui.igEditor.setDefaultCulture(b)}else{a.ig.regional.defaults=a.extend(a.ig._regional,(typeof b==="string")?a.ig.regional[b]:b)}}}(jQuery));String.prototype.startsWith=function(a){return this.indexOf(a)===0};String.prototype.endsWith=function(a){var b=this.length-a.length;return b>=0&&this.lastIndexOf(a)===b};Array.prototype.remove=function(c,a){var b=this.slice((a||c)+1||this.length);this.length=c<0?this.length+c:c;return this.push.apply(this,b)};(function(e){var a="=id",f=null,c={},d=function(g){try{g.preventDefault();g.stopPropagation()}catch(h){}},b=function(h,g){var i=h.id;if(!i&&g){h._fid=g}return i?i:h._fid};e.widget("ui.igValidator",{options:{showIcon:null,animationShow:null,animationHide:null,enableTargetErrorCss:null,alignment:null,keepFocus:null,onchange:null,onblur:null,formSubmit:null,onsubmit:null,bodyAsParent:true,required:false,minLength:-1,maxLength:-1,min:null,max:null,regExp:null,checkboxesName:false,locale:null,element:null,theme:null,errorMessage:null},css:{label:"ui-igvalidator ui-widget ui-state-error",icon:"ui-igvalidator-icon ui-icon ui-icon-alert",target:"ui-igvalidator-target"},locale:{defaultMessage:"Please fix this field",selectMessage:"Please select a value",rangeSelectMessage:"Please select no more than {0} and not less than {1} items",minSelectMessage:"Please select at least {0} items",maxSelectMessage:"Please select no more than {0} items",rangeLengthMessage:"Please enter a value between {0} and {1} characters long",minLengthMessage:"Please enter at least {0} characters",maxLengthMessage:"Please enter no more than {0} characters",requiredMessage:"This field is required",maskMessage:"Please fill all required positions",dateFieldsMessage:"Please enter values in date fields",invalidDayMessage:"Invalid day of month. Please enter correct day",dateMessage:"Please enter a valid date",numberMessage:"Please enter a valid number",rangeMessage:"Please enter a value between {0} and {1}",minMessage:"Please enter a value greater than or equal to {0}",maxMessage:"Please enter a value less than or equal to {0}"},events:{checkValue:null,validation:null,errorShowing:null,errorHiding:null,errorShown:null,errorHidden:null},_create:function(){var l,k,g,i=this.options,j=this,h=e.ui.igValidator.defaults;for(l in i){if(i.hasOwnProperty(l)&&i[l]===null&&h[l]!==undefined){i[l]=h[l]}}g=j.element;j._state=3;j._focTime=0;j._init0();k=g[0].nodeName;if(k==="SELECT"){k=5}else{if((k=g[0].type)==="checkbox"){k=i.checkboxesName?6:4}else{if(k==="radio"){k=6}else{k=0}}}j._elem=(k!==6)?g:e("[name="+g[0].name+"]").map(function(){return(this.form===g[0].form)?this:null});j._t=k;if(!i.ctl){j._elem.bind(j._evts={keydown:function(m){if((l=m.keyCode)<15||l>20){j._evt(m,(l===9)?null:j,l===9)}},change:function(m){j._evt(m,j)},cut:function(m){j._evt(m,j)},paste:function(m){j._evt(m,j)},beforecut:function(m){j._evt(m,j)},drop:function(m){j._evt(m,j)},dragend:function(m){j._evt(m,j)},blur:function(m){j._evt(m,j,1)}});if(i.element){i.element.bind(j._evtsE={mousedown:function(m){j._evt(m,j)},mouseup:function(m){j._evt(m)}})}}},_evt:function(j,g,h){var i=this.options;if((h&&!i.onblur)||(!h&&!i.onchange)){return}if(g){setTimeout(function(){g.validate(j)},20)}else{this.validate(j)}},_loc:function(j,i){var h,g=this.options;if(!(h=g.errorMessage)&&!(h=g[j+=(i?"":"Message")])){g=g.locale;if(typeof g==="string"){g=e.ui.igValidator.locale[g]}if(!g||!(h=g[j])){h=e.ui.igValidator.locale.defaults[j]}}return h?h:this.locale[j]},_foc1:function(g){g=g.keepFocus;return(g&&this._t!==6&&!(g.indexOf&&g.indexOf("n")===0))?((g==="once"||g===1)?1:2):null},_init0:function(g){var h,k,l,i=this._id,j=this.options;if(g){this._doError()}else{if(j.ctl){j.ctl._validator=this}}if(!(h=this.element[0].form)){return}k=b(h,"fid");if(!i){if(!(i=this.element[0].id)){i=(a+=a.length)}this._id=i}l=c[k];if(!g&&(j.onsubmit||j.formSubmit)){if(!h._ig_onsubmit&&j.onsubmit){h._ig_onsubmit=1;e(h).submit(function(m){var n=c[b(this)];if(n){n.validate(m)}})}if(!h._ig_formsubmit&&j.formSubmit){h._ig_formsubmit=h.submit;h.submit=function(){var m=c[b(this)];if(m&&m.validate()){return}if(this._ig_formsubmit){this._ig_formsubmit()}}}if(!l){l=c[k]={ctls:{},validate:function(q){var m,o=false,p=1,n=this.ctls;for(m in n){if(n.hasOwnProperty(m)&&n[m].validate(q,p)){o=true;if(!e.ui.igValidator.defaults.showAllErrorsOnSubmit){p=2}}}if(q&&o){d(q)}return o}}}l.ctls[i]=this}else{if(l&&l.ctls&&l.ctls[i]){delete l.ctls[i]}}},getLocaleOption:function(g){return this._loc(g,1)},isMessageDisplayed:function(){return this._state>6},isValidState:function(){return this._state<6},hide:function(g){this._doError(null,null,g?6:5)},validate:function(n,p){var q,r,j,h=null,i="Length",g=this._t,k=-1,l=this.options,m=this.element;if(!m){return}if(g>3){i="Select";k=j=(g===5)?(m[0].multiple?e("option:selected",m[0]).length:m[0].selectedIndex):this._elem.filter(":checked").length}else{j=m.val();k=j.length}if(!this._trigger("checkValue",n,r={message:this._loc("default"),value:l.ctl?l.ctl.value():j})){return this._doError(r.message,n,p)}if(!l.required&&k===0){return this._doError(null,n,p)}q=l.regExp;if(q){if(!q.test){q=new RegExp(q.toString())}return this._doError(q.test(j)?null:r.message,n,p)}if(l.ctl){q=l.ctl._doInvalid(null,9);return this._doError(q?q.message:null,n,p)}q=l.minLength;r=l.maxLength;if(k>=0&&(q>k||(r>0&&r<k))){if(q>0&&r>0){h=this._loc("range"+i).replace("{0}",r).replace("{1}",q)}else{h=this._loc(((q>0)?"min":"max")+i).replace("{0}",(q>0)?q:r)}}if(!h&&l.required&&(k===0||!j)){h=this._loc((g>4)?"select":"required")}if(!h&&g<2&&k>0&&(q=((typeof l.min==="number")?1:0)+((typeof l.max==="number")?2:0))>0){if(isNaN(j=parseFloat(j))){h=this._loc("number")}else{if(q===3&&(j<l.min||j>l.max)){h=this._loc("range").replace("{0}",l.min).replace("{1}",l.max)}else{if(q===1&&j<l.min){h=this._loc("min").replace("{0}",l.min)}else{if(q===2&&j>l.max){h=this._loc("max").replace("{0}",l.max)}}}}}return this._doError(h,n,p)},_doError:function(w,A,s){var n,q,p,B,v,k,D,m,C,u,z,j=this.css,h="left",i="top",l=this._state,r=w,E=this._lbl,t=this,g=this.options;if(!s){s=0}C=g.ctl;u=(g.alignment==="bottom")?0:(g.alignment==="left")?-1:1;if(!w&&E){w=E._txt}if(l<6&&!r){return}z=E&&E._txt===w&&!this._changed;this._changed=null;if(r&&A&&A.keyCode===9&&t._foc1(g)===2){d(A);if(z){return 2}}if(r&&z){if(l>5){if(f===t){t._focus(g,s,A)}return 2}}if(!s&&r&&f&&new Date().getTime()-f._focTime<100){return 2}k={message:w,invalid:!!r};if(s<5&&!t._trigger("validation",A,k)){return}t._state=r?6:1;if(!(D=g.element)){D=t.element}if(g.enableTargetErrorCss){if(r){D.addClass(j.target)}else{if(s!==5){D.removeClass(j.target)}}}if(s===2){return 2}if(!t._trigger(r?"errorShowing":"errorHiding",A,k)){return 1}if(!r&&!E){return}w=k.message;t._state++;n=!g.bodyAsParent;if(n){h="marginLeft";i="marginTop"}q=C?C._element:D;if(!E){E=t.element[0].id;if(E){E=' for="'+E+'"'}E=t._lbl=e("<label"+E+"/>").addClass(j.label).css({position:"absolute",visibility:"hidden"});E[0].unselectable="on";E[0].innerHTML=w;E[0]._id=98;t._dd=g.theme?e("<span/>").addClass(g.theme).css("position","absolute").append(E):E;if(n){t._dd.prependTo(q.parent())}else{t._dd.appendTo(e("body"))}}if(r){t._dd.css(h,"0px").css(i,"0px");E._txt=w;if(g.showIcon){if(w===" "||w==="&nbsp;"){w=""}w='<span class="'+j.icon+'"></span><span style="display:inline-block;width:18px;"></span>'+w}E[0].innerHTML=w;E.css("width","auto").css("height","auto");E._width0=E[0].offsetWidth;E._height0=E[0].offsetHeight;E._width=Math.max(E.width(),5);E._height=Math.max(E.height(),10);if(g.showIcon){E._height=Math.max(E.children()[0].offsetHeight,E._height)}t._focTime=0;f=t}p=function(){if(r){E.css("filter","")}else{t._dd.remove();t._dd=t._lbl=f=null}t._state++};if(r){if((m=g.animationShow)<5){m=null}t._focus(g,s,A);E.css({opacity:m?0:1,height:(m?0:E._height)+"px",width:Math.floor(E._width/((m&&u>=0)?2:1))+"px",display:"",visibility:"visible"});B=(C&&C._swap)?t.element:D;v=B.offset();v.top+=u?0:B.outerHeight();if(C&&C._swap){v.left-=C._leftShift()}if(u){v.left+=(u<0)?-E[0].offsetWidth:q[0].offsetWidth}if(n){B=E.offset();v.left-=B.left;v.top-=B.top}t._dd.css(h,v.left+"px").css(i,v.top+"px");if(m){E.animate({opacity:1,height:E._height,width:E._width},m,null,p)}else{p()}t._trigger("errorShown",A,k);return 2}if((m=g.animationHide)<5){m=null}if(m){E.animate({opacity:0.6},Math.floor(m*0.34)).animate({opacity:0,height:0,width:Math.floor(E._width/((u<0)?1:2))},Math.floor(m*0.66),null,p)}else{p()}t._trigger("errorHidden",A,k)},_focus:function(g,i,j){var h=(!i&&this._foc1(g))?this.element:null;j=(j&&j.keyCode!==9)?j.type:"";if(h&&!(g.ctl&&g.ctl._fcs)&&(this._foc1(g)!==1||!this._focTime)&&j.indexOf("key")<0&&j.indexOf("mouse")<0){if(e.ui.igEditor){e.ui.igEditor._keepFoc=g.ctl}this._focTime=new Date().getTime();setTimeout(function(){try{h.focus()}catch(k){}},0)}},_setOption:function(g,h){if(this.options[g]===h){return}e.Widget.prototype._setOption.apply(this,arguments);if(g!=="locale"){this._init0()}},destroy:function(){var g=this.options;if(!g.ctl){this._elem.unbind(this._evts);if(this._evtsE){g.element.unbind(this._evtsE)}}this._init0(1);g.element=g.ctl=this._evts=this._evtsE=this._elem=null;e.Widget.prototype.destroy.apply(this,arguments);return this}});e.extend(e.ui.igValidator,{version:"11.1.20111.2010"});e.ui.igValidator.locale={defaults:{}};e.ui.igValidator.setDefaultCulture=function(g){e.ui.igValidator.locale.defaults=e.extend({},(typeof g==="string")?e.ui.igValidator.locale[g]:g)};e.ui.igValidator.defaults={showAllErrorsOnSubmit:false,showIcon:true,animationShow:300,animationHide:300,enableTargetErrorCss:true,alignment:"bottom",keepFocus:null,onchange:true,onblur:true,formSubmit:false,onsubmit:true}}(jQuery));(function(a){var e=function(g,f){return g===null||g===undefined||(f&&typeof g==="number"&&isNaN(g))},b=function(f,g){if(isNaN(f=parseInt(f,10))){f=g?g:0}return f},d=function(f){return e(f)?"":f.toString()},c=function(f){try{f.preventDefault();f.stopPropagation()}catch(g){}};a.ig=a.ig||{};a.widget("ui.igEditor",{options:{value:null,tabIndex:null,textMode:null,nullText:null,button:"none",buttonHidden:false,includeKeys:null,excludeKeys:null,textAlign:null,listItems:null,regional:null,theme:null,type:null,locale:null,width:null,height:null,validatorOptions:null,required:false,display:"inline-block",nullable:true,renderInContainer:false,toUpper:false,toLower:false,selectionOnFocus:-1,readOnly:false,maxLength:0,spinDelta:1,spinOnReadOnly:false,focusOnSpin:false,spinWrapAround:false,hideEnterKey:true,dropDownOnReadOnly:false,dropDownTriggers:"button, ctrl + arrow, alt + arrow",listMatchIgnoreCase:true,listMatchOnly:false,listMatchContains:false,listAutoComplete:false,listDropDownAsChild:false,listWidth:0,listMaxHeight:300,listColumns:1,listAnimationShow:400,listAnimationHide:450,borderBetweenFieldAndButtons:false},events:{keydown:0,keypress:1,keyup:2,mousedown:3,mouseup:4,mousemove:5,mouseover:6,mouseleave:7,focus:8,blur:9,valueChanging:10,valueChanged:11,textChanged:12,invalidValue:13,spin:14,buttonClick:15,showDropDown:16,hideDropDown:17,listSelecting:18,listSelected:19},css:{editor:"ui-igedit",field:"ui-igedit-field",textArea:"ui-igedit-textarea",hover:"ui-igedit-hover",focus:"ui-igedit-focus",buttonsImageStateOverride:"ui-igedit-buttonsimagestateoverride",borderColor:"ui-igedit-bordercolor",disabled:"ui-igedit-disabled ui-state-disabled",negative:"ui-igedit-negative",nullValue:"ui-igedit-nullvalue",fieldInContainer:"ui-igedit-fieldincontainer",button:"ui-igedit-button",buttonFocus:"ui-igedit-buttonfocus ui-state-focus",buttonDefault:"ui-igedit-buttondefault ui-state-default",buttonHover:"ui-igedit-buttonhover ui-state-hover",buttonPressed:"ui-igedit-buttonpressed ui-state-highlight",buttonDisabled:"ui-igedit-buttondisabled ui-state-disabled",buttonImage:"ui-igedit-buttonimage ui-icon-triangle-1-s ui-icon",buttonClearImage:"ui-icon-circle-close",buttonImageHover:"ui-igedit-buttonimagehover",buttonImagePressed:"ui-igedit-buttonimagepressed",buttonImageDisabled:"ui-igedit-buttonimagedisabled",spinHolder:"ui-igedit-spinholder",spinButton:"ui-igedit-spinbutton",spinButtonImage:"ui-igedit-spinbuttonimage",spinLowerImage:"ui-igedit-spinlowerimage ui-icon-triangle-1-s ui-icon",spinLowerImageHover:"ui-igedit-spinlowerimagehover",spinLowerImagePressed:"ui-igedit-spinlowerimagepressed",spinLowerImageDisabled:"ui-igedit-spinlowerimagedisabled",spinUpperImage:"ui-igedit-spinupperimage ui-icon-triangle-1-n ui-icon",spinUpperImageHover:"ui-igedit-spinupperimagehover",spinUpperImagePressed:"ui-igedit-spinupperimagepressed",spinUpperImageDisabled:"ui-igedit-spinupperimagedisabled",dropDown:"ui-igedit-dropdown",list:"ui-igedit-list ui-widget ui-widget-content",listItem:"ui-igedit-listitem ui-state-default",listItemHover:"ui-igedit-listitemhover ui-state-hover",listItemSelected:"ui-igedit-listitemselected ui-state-highlight",listItemColumnBorder:"ui-igedit-listitemcolumnborder"},locale:{spinUpperTitle:"Increment",spinLowerTitle:"Decrement",buttonTitle:"Show list",clearTitle:"Clear value",datePickerButtonTitle:"Show calendar"},regional:a.ig._regional||{},_create:function(m){var q,i,h=this.css,g,f,p,l,k,j=this.options,n=this;m=this._doType(e(m)?j.type:m,i=j.value);this._listID=-1;l=j.theme;this._css=h.field;g=this._element=this._render(this.element,j,h);if(j.display){g.css("display",j.display)}if(m===3&&(!a.datepicker||this._ta)){throw new Error("The ui.igDatePicker depends on jquery.ui.datepicker and TEXTAREA/multiline is not supported")}if(this._ta){this._css+=" "+h.textArea}f=this._field;this._box=f[0].type==="checkbox";this._1e=f===g;if(j.readOnly){f[0].readOnly="readonly"}p=j.textAlign;if(!p&&m>3){p="right"}if(p){f.css("textAlign",p)}f[0]._id=-1;f[0].disabled=j.disabled;this._hover=this._mouseDown=0;this._fix=1;this._fcs=-1;this._bad=0;this._k0=this._sel0=0;this._noPaste=0;this._fixMode(1);this._butHide=false;f.bind(n._evts={keydown:function(o){n._onEvt(o,0)},keypress:function(o){n._onEvt(o,1)},keyup:function(o){n._onEvt(o,2)},paste:function(o){n._onEvt(o,11)},beforecut:function(o){n._onEvt(o,11)},cut:function(o){n._onEvt(o,11)},drop:function(o){n._onEvt(o,11)},focus:function(o){n._onEvt(o,8)},blur:function(o){n._onEvt(o,9)}});q={mousedown:function(o){n._onEvt(o,3)},mouseup:function(o){n._onEvt(o,4)},mousemove:function(o){n._onEvt(o,5)},mouseover:function(o){n._onEvt(o,6)},mouseleave:function(o){n._onEvt(o,7)}};if(this._buttons&&this._buttons[1]){q.DOMMouseScroll=function(o){n._onEvt(o,10)};q.mousewheel=function(o){n._onEvt(o,10)}}g.bind(n._mEvts=q);this._fcs=0;q=j.maxLength;if(q&&q>0){f[0].maxLength=q}q=j._vsFormat;if(q&&i&&m>3&&(typeof i!=="number")){i=parseFloat(this._txtAsNum(i.toString(),q,"-"))}this._setVal(e(i)?this._value:i);if(this._val()===""){this._text=this._field[0].value=this._focTxt("",false,"")}this._fixCss();k=this._oldCss;if(!(i=j.height)&&!this._1e){i=k.height;if(i){i=(i.indexOf("px")>0)?b(i):this.element.height()}}this._height(i);if(this._box){this._fixBC(f,f)}if(!(i=j.width)&&!this._1e){i=k.width;if(i){i=(i.indexOf("px")>0)?b(i):this.element.width()}}if(this._selElem){delete k.width;delete k.height}this._width(i);this._lastText=this._val();this._initValidator();this._doClear(j.value)},_doType:function(g,f){if(g==="text"){g=0}if(g==="mask"){g=1}if(g==="date"){g=2}if(g==="datepicker"){g=3}if(g==="numeric"){g=4}if(g==="currency"){g=5}if(g==="percent"){g=6}if(typeof g!=="number"||g<0||g>6){if(typeof f==="number"){g=4}else{if(f&&f.getMonth){g=2}else{g=0}}}this._type=g;return g},_render:function(l,u,y){var w,j,p,x,g,f,t,A,n,s,r,v,k,q=l.css("direction")==="rtl",B=null,m=u.button,z=l,h=null;j=l[0].nodeName;p=l[0].parentNode;if(j){j=j.toUpperCase()}this._ta=(j==="TEXTAREA");this._left=q;g=j==="INPUT";h=this._selElem=j==="SELECT";w=m&&m.indexOf("spin")>=0;k=this._clear=m&&m.indexOf("clear")>=0;m=k||(m&&m.indexOf("dropdown")>=0)||(h&&!w);f=!u.borderBetweenFieldAndButtons&&(w||m);t=(m||w||u.renderInContainer||u.theme);A=this._oldCss={display:0,visibility:0};n=this._oldAttr={className:0,title:0};if(g){n.value=0}else{if(h){if(!(h=u.listItems)){u.listItems=[];h=l[0].options;s=h?h.length:0;if(s>0){while(s-->0){r=h[s].value;u.listItems[s]={value:r,text:e(v=h[s].text)?r:v}}this._listID=l[0].selectedIndex}h=1}}else{n.innerHTML=0}}if(g||this._ta){n.disabled=n.readOnly=n.alt=A.textAlign=0;if(f){A[q?"borderLeftWidth":"borderRightWidth"]=0}}for(s in A){if(A.hasOwnProperty(s)){A[s]=l.css(s)}}for(s in n){if(n.hasOwnProperty(s)){n[s]=l[0][s]}}A.width=l[0].style.width;A.height=l[0].style.height;if((s=g?n.value:(h?l.val():n.innerHTML))===u.nullText){s=""}if(!this._ta&&s){s=s.replace(/[\x09\x0a]/g,"")}this._value=s;if(g||this._ta||h){if(n.className){this._css+=" "+n.className}if(t){this._swap=true;l.css("display",h?"none":"");l.css("visibility",h?"hidden":"visible");l=a("<span />");p.insertBefore(l[0],z[0]);if(h){z=a("<input />")}else{p.removeChild(z[0])}l.css("display",A.display);l.css("visibility",A.visibility)}else{this._css+=" "+y.editor;return(this._field=l)}}else{if(u.textMode==="textarea"||u.textMode==="multiline"){z=a("<textarea />");this._ta=1}else{z=a(u.textMode?'<input type="'+u.textMode+'"/>':"<input />")}l[0].innerHTML=""}l.addClass(y.editor);this._css+=" "+y.fieldInContainer;if(u.theme){l.addClass(u.theme)}if(m||w){this._buttons=[]}if(f){z.css(this._bb=q?"borderLeftWidth":"borderRightWidth","0px");if(w){this._bb=null}}if(m){x=[y.button+" "+y.buttonDefault,y.buttonHover,y.buttonPressed,y.buttonDisabled,y.buttonImage+(k?" "+y.buttonClearImage:""),y.buttonImageHover,y.buttonImagePressed,y.buttonImageDisabled];m=this._buttons[0]=a("<span />").addClass(x[0]);m[0].longdesc=m[0].title=this._optVal("buttonTitle",1);m._css=x;v=a("<span />").addClass(x[4]).appendTo(m);v[0]._id=5;m[0]._id=1;if(q){m.css("float","left");m.appendTo(l)}}if(w){B=a("<span />").addClass(y.spinHolder);x=[y.spinButton+" "+y.buttonDefault,y.buttonHover,y.buttonPressed,y.buttonDisabled,y.spinButtonImage+" "+y.spinUpperImage,y.spinUpperImageHover,y.spinUpperImagePressed,y.spinUpperImageDisabled];r=this._buttons[1]=a("<span />").addClass(x[0]).appendTo(B);r[0].longdesc=r[0].title=this._optVal("spinUpperTitle",3);r._css=x;r[0]._id=2;v=a("<span />").addClass(x[4]).appendTo(r);v[0]._id=6;x=[y.spinButton+" "+y.buttonDefault,y.buttonHover,y.buttonPressed,y.buttonDisabled,y.spinButtonImage+" "+y.spinLowerImage,y.spinLowerImageHover,y.spinLowerImagePressed,y.spinLowerImageDisabled];r=this._buttons[2]=a("<span />").addClass(x[0]).appendTo(B);r[0].longdesc=r[0].title=this._optVal("spinLowerTitle",3);r._css=x;r[0]._id=3;v=a("<span />").addClass(x[4]).appendTo(r);v[0]._id=7;if(q){B.appendTo(l)}}this._field=z.appendTo(l);if(!e(s=u.tabIndex)){z[0].tabIndex=s}if(!q&&w){B.appendTo(l)}if(!q&&m){m.appendTo(l)}return l},_leftShift:function(){var f=this._buttons;return(this._left&&f)?(f[0]?f[0].outerWidth():0)+(f[1]?f[1].outerWidth():0):0},_val:function(){return this._box?this._field[0].checked:(this._nullT?"":this._field[0].value)},_fixNull:function(){var f,g=this.options.nullText;if(!g){return}f=this._val();this._nullT=null;if(f===""&&g&&this._fcs<2){this._nullT=true;this._field[0].value=g}this._fixCss()},_focTxt:function(g,h,i){var f=this.options.nullText;this._nullT=null;if(!h&&g===""&&f&&(!e(i)||this.options.readOnly)){g=f;this._nullT=true}return g},validate:function(f){return !this.options.validatorOptions||!this._doInvalid(null,f?2:1)},isValid:function(){return !this._doInvalid(null,9)},_doInvalid:function(q,p){if(!this._field){return}var j,g,n,k=this._val(),m=false,f=1,r=null,l=this.options,h=this._type;this._inv=null;if(l.required&&(!k||(h===1&&!this.getValueByMode(0,"",1)))){r=1}else{if(h===0){if(!l.nullable&&!k){r=1}}else{if(h===1){k=this._txt;g=k.length;while(g-->0&&!r){j=k.charCodeAt(g);if(j<21&&(j%2)===1){r={value:k=this._getVal(),message:this._optVal("mask",2)}}}}else{if(h<4){k=this._toDate(k,q==="",true,true);r=this._inv}else{k=this._toNum(k,true,true);r=this._inv;f=this._prop(7);if(r&&k&&f>1){n=k;r.value=(k/=f)}}}}}if(r===1){r={value:k=null,message:this._optVal("required",2)}}if(p===9){return r}if(r){m=this._fire(13,null,r);if(k!==r.value){k=r.value;r=null}if(n){if(r){k=n}else{if(e(k,1)){k=null}else{if(k){k*=f}}}}if(h<=1&&!r){this._setVal(k);return}}if(h>1&&h<4){if(!(this._isNull=e(k))){this._date=k}if(k&&l.useLastGoodDate){this._goodD=k}}this._value=k;if(p&&r&&!m&&!this._setOpt){return this._doError(p,null,r.message)}},_focusTxt:function(m,k,f){var j=k,l="",g=this.options,i=this._type,n=null,h="";if(i===1){f=null;if(!e(k)&&!m){k=k!=="";if(k&&this._bad!==0){this._txt=this._setTxt(this._val(),5,true)}f=this._txt;if(!k){this._doInvalid(j)}}l=this._getTxt(m?5:4,m?g.promptChar:g.padChar,f)}else{if(i===2||i===3){if(e(f)){h=g.promptChar;if(e(k)&&m){return this._getTxt(5,h)}if(!e(k)&&!m){this._doInvalid(k);n=this._value}else{if(!this._isNull){n=this._date}}}else{n=this._toDate(f,m,true)}l=this._toTxt(n,m,h,!e(k))}else{if(i>3){if(!e(k)&&!m){this._doInvalid()}l=this._toTxtNum(this._value,m)}else{l=this._val();if(!e(k)&&!m){this._doInvalid(k)}}}}return this._focTxt(l,m,k)},_repaint:function(){if(this._val()!==this._text){this._field[0].value=this._text}},_instant:function(h,j,l){var g,i=this._type,k=this._dataMode;if(this._box){return this._val()}if(i===1){return this.getValueByMode(k,h,j)}if(i===2||i===3){return this.getValueByMode(h?0:k,j)}if(i>3){g=this._toNum(this._val(),j);if(g&&(j||l)&&!isNaN(g)){g/=this._prop(7)}return(h||k>0)?g:this._toTxtNum(g,k===0)}return this._val()},_optVal:function(i,g){var h=this._validator,f=this.options;if(g===2){return h?h._loc(i):""}if(!e(h=f[i])){return h}if(g===3||g===1){if(this._clear){i="clearTitle"}else{if(g===1&&this._type===3){i="datePickerButtonTitle"}}f=f.locale;if(typeof f==="string"){f=a.ui.igEditor.locale[f]}if(!f||!(h=f[i])){h=a.ui.igEditor.locale.defaults[i]}return h?h:this.locale[i]}f=f.regional;if(typeof f==="string"){f=a.ig.regional[f]}if(!f||e(h=f[i])){h=a.ig.regional.defaults[i]}return e(h)?this.regional[i]:h},_setOption:function(n,j){var p,l=j,f=null,k=this.options,i=n==="locale",h=n==="regional",g=this._buttons,m=this._field;if(k[n]===j||n==="textMode"){return}if(n==="buttonHidden"){return this._butVis(j)}if(n==="theme"){if(this._1e){return}if(k.theme){this._element.removeClass(k.theme)}if(j){this._element.addClass(j)}this._listRemove()}if(n==="inputMask"&&this._type===1){l=this.getValueByMode(0," ",1);this._setMask(j);this._setTxt(l,0)}k[n]=j;if(h&&this._dp){f=this._dpRegion();if(f){this._dpOption(k.datepickerOptions=a.extend(k.datepickerOptions,f))}}p="buttonTitle";if((i||n===p)&&g&&g[0]){g[0][0].title=this._optVal(p,1)}p="spinUpperTitle";if((i||n===p)&&g&&g[1]){g[1][0].title=this._optVal(p,3)}p="spinLowerTitle";if((i||n===p)&&g&&g[2]){g[2][0].title=this._optVal(p,3)}if(n==="disabled"){m[0].disabled=j;this._fixCss()}if(n==="display"){this._element.css(n,j)}if(n==="textAlign"){m.css(n,j)}if(n==="readOnly"){m[0].readOnly=j?"readonly":""}if(n==="maxLength"||n==="tabIndex"){m[0][n]=j}if(n==="value"){this.value(j)}if(n==="width"){this._width(j)}if(n==="height"){this._height(j)}if(n==="validatorOptions"||n==="required"){this._initValidator()}if(n==="nullText"){this._fixNull()}if(n==="type"){this._doType(j);h=3}n=n.toLowerCase();if(n.indexOf("list")===0){this._listRemove()}else{if(n.indexOf("kero")>0){if(this._dp){this._dpOption(j)}}else{if(n.indexOf("data")>=0||h||!e(this.regional[n])||n.indexOf("date")===0||n.indexOf("max")>=0||n.indexOf("min")>=0||n.indexOf("pat")>=0||n.indexOf("roup")>0||n.indexOf("sep")>=0||n.indexOf("ymb")>0){this._setOpt=true;this._listRemove();this._fixMode((h===3)?3:0);this._repaint();this._lastText=this._val();this._setOpt=null}}}return this},_dpRegion:function(){var f=this.options.regional;return(a.datepicker&&typeof f==="string")?a.datepicker.regional[(f==="defaults"||f==="en-US")?"":f]:null},_dpOption:function(f){var g=this._getVal(1);this._field.datepicker("option",f);this._setVal(g)},getRegionalOption:function(f){return this._optVal(f)},field:function(){return this._field},mainElement:function(){return this._element},dropDownElement:function(){var f=this._ddList;if(this._type===3){f=a.datepicker;if(f){f=(f._ig_dp===this)?f.dpDiv:null}}return f?f:null},show:function(){return this._vis(true)},hide:function(){return this._vis()},remove:function(){var g,f=this._element;g=(f&&f[0])?f[0].parentNode:null;if(g&&g.tagName){this._doError();this._doDrop();this._stopTimer();this._hadFocus=a.ui.igEditor._keepFoc=null;this._noPaste=this._fcs=this._k0=this._hover=this._mouseDown=0;g.removeChild(f[0])}return this},dropDownVisible:function(f){if(!arguments.length){return !!this._ddOn}if(!f){this._doDrop()}else{if(!this._ddOn){this._doDrop(1)}}return this},findListItemIndex:function(j,g,f,i){var h=this._find(d(j),0,1,g,f,i);return h?h.id:-1},addListItems:function(g,f){return this._listChange(g,f,2)},addListItem:function(g,f){return this._listChange([g],f,2)},removeListItem:function(f){return this._listChange(f,-1,1)},removeListItemAt:function(f){return this._listChange(null,f,1)},clearListItems:function(){return this._listChange(null,-1,0)},selectedListIndex:function(f){if(!arguments.length){return this._listID}this._listSelect(f)},getSelectedListItem:function(){var g=this.options.listItems,f=this._listID;return(g&&f>=0)?g[f]:null},hasInvalidMessage:function(){return this._validator?this._validator.isMessageDisplayed():false},validator:function(){var f=this._validator;return f?f:null},text:function(f,g){if(!arguments.length){return this._val()}if(this._type>0){this._sTxt=1;if(this._type===1){this._setTxt(f,e(g)?5:(1000+g))}else{this._setVal(f,true)}this._sTxt=0}else{if(f){this._nullT=null}this._text=f;this._repaint()}if(this._fix===1){this._old=this._instant(1,null,1)}return this},value:function(f){if(!arguments.length){f=this._getVal();return(f===undefined)?null:f}this._setVal(f,true);this._lastText=this._val();return this},_getVal:function(g){var f=this.options,h=this._instant(g,1);if(this._type>3){if(e(h)){h=f.nullValue;if(this._dataMode<=0){return d(h)}return(f.nullable||!e(h))?h:NaN}}return h},_set_val:function(f,g){this._fix=0;this._setVal(f,g);this._fix=1},_setVal:function(h,i){var j,g,f=this._type;if(this._box){if(h!==true){h=h==="true"}this._field[0].checked=h}else{if(f===1){this._setTxt(d(h),this._dataMode)}else{if(f===2||f===3){if(!e(h)&&!h.getTime){if(!(i=this._toDate(h=h.toString(),this._dataMode<2))){i=this._toDate(h,true)}h=i}i=h;if(e(h=this._limits(h))){h=i}this._txt=this._mask;if(!(this._isNull=e(h))){this._toTxt(h,true,"",true)}else{h=new Date()}this._date=h;if(this.options.useLastGoodDate){this._goodD=h}this._text=this._focusTxt(this._fcs>1);this._repaint()}else{if(f>3){if(e(h,1)){h=null}if(h&&typeof h==="number"&&this._fix!==0){h*=this._prop(7)}j=this._toTxtNum(h=this._toNum(h,true),this._fcs===2);g=this._prop(12);if(i===2&&g>0&&j.length>g){return}this._focTxt(j);this._text=j;this._value=h;this._repaint()}else{this.text(d(h))}}}}if(this._fix===1&&f>0){this._old=this._instant(1,null,1)}j=this.options.value=this._getVal();this._doClear(j);this._fixNull();this._dtt()},_doClear:function(f){if(this._clear){if(this._type===1){f=this.getValueByMode(0)}if(f===""){f=null}this._butVis(f===null)}},_vis:function(f){var g=this._element;g.css("display",f?this.options.display:"none");g.css("visibility",f?"visible":"hidden");this._fixHeight();this._doError();return this},_fixHeight:function(){var g,f=this._1e?0:this._field[0].offsetHeight,i=this._element;g=(f&&i.css("display").indexOf("inline")<0)?i[0].nodeName:null;if(g==="DIV"||g==="SPAN"){i.css("height",f)}},_butW:function(f,g){g=g?f[0].parentNode:f[0];return((g=g.offsetWidth)<2||(f=b(f.css("width"),0))<2)?0:Math.max(g,f+2)},_fixWidth:function(){var m,j,f,g=0,h=this._element,k=this._field,l=this._buttons;if(l){if((j=this._field[0].offsetWidth-1)<2){return 1}this._noWidth=null;if(l[0]){if((m=this._butW(l[0]))<2){return 1}j+=(this._wB=m);g+=(16-m)}if(l[1]){if((m=this._butW(l[1],1))<2){return 1}j+=m;g+=(16-m)}f=this._field[0].offsetHeight+7;h.css("width",this._w0);if(g<0){k.css("width",this._wF=Math.max(this._wF+g,2))}g=0;while(g++<5&&f<=h[0].offsetHeight){h.css("width",++this._w0)}this._butVis()}this._stopTimer()},_butVis:function(g){var k=this._wF,j=this._bb,i=this.options,h=this._buttons,f=this._field;if(e(g)){if(!(g=i.buttonHidden)){return}}else{i.buttonHidden=g}if(!this._wB||!h||!(h=h[0])||this._butHide===g){return}this._butHide=g;if(g){h.hide();k+=this._wB+(j?-1:0)}else{h.show()}if(j){f.css(j,g?"":"0px")}f.css("width",k)},_width:function(h){var f=this,i=this._buttons,g=this._field;if(this._1e){if(h){g.css("width",h)}return}h=parseInt(h,10);if(!h||isNaN(h)||h<1){h=120}h=(this._w0=b(h))-1-b(g.css("paddingLeft"))-b(g.css("paddingRight"));if((h-=i?((i[0]?16:0)+(i[1]?16:0)):0)>0){g.css("width",h)}this._wF=h;if(this._fixWidth()&&!this._timer){this._noWidth=this._timer=setInterval(function(){f._fixWidth()},200)}},_height:function(g){var h=this._field,f=this._buttons;if(this._1e){if(g){h.css("height",g)}return}if((g=b(g))>6){if(f&&f[1]){g-=g%2}h.css("height",g);if(f&&f[0]){f[0].css("height",g);f[0].find("SPAN").css("marginTop",Math.floor((g-16)/2))}if(f&&f[1]){f[1].css("height",g=Math.floor(g/2)-1);f[2].css("height",g);f[1].find("SPAN").css("marginTop",g=Math.floor((g-16)/2));f[2].find("SPAN").css("marginTop",g)}}this._fixHeight()},_spin:function(i){var h,f,k,g=this._nullT,j=this.options;if(this._box){return}if(this._fcs<1&&j.focusOnSpin){this.setFocus();if(this._fcs<1){this._focSpin=i;return}}if(this._fire(14,null,i)){return}if(g){this._nullT=null;this._fixCss()}k=this._val();this.spin(i);if(this._val()===k){if(g){this._nullT=g;this._fixCss();return}if(this._type>3&&j.spinWrapAround&&!e(this._prop(10))&&!e(this._prop(11))){h=this._sel0;f=this._prop(7);if(!f){f=1}i=this._limits(this._getVal(true)*f,true);this._setVal(i/f,this._fcs);this.select(h)}}if(this._val()!==k){this._fire(12)}},_item:function(f){if(f&&!e(f.text)){f=f.text}if(typeof f==="function"){f=f()}return e(f)?"":f},_spinList:function(l){var f,i,g,h,k,j=this.options;k=j.listItems;h=k?k.length:0;if(h<1){return 1}l=(l<0)?1:-1;i=this._listID+l;g=j.spinWrapAround;if(i>=h){if(!g){return}i=0}if(i<0){if(!g){return}i=h-1}f=this._instant(1,null,1);if(f===this._item(k[i])){if((i+=l)<0){if(!g){return}i=h-1}if(i>=h){if(!g){return}i=0}}f=this._item(k[i]);if(!this._listSelect(i)){this._set_val(f)}},_doKey:function(s,g,w,n,v,l,h,y){var f,t,r,u,x,p,o,q,i,m,z=this._prop(12),j=this._type;if(j>0&&j<4){i=this._mask;n=i?i.length:0;if(n<1||s<7||(s>8&&s<32)){s=0}if(h){if(s===0||!(i.indexOf(g)>0||this._optVal("am").indexOf(g)>=0||this._optVal("pm").indexOf(g)>=0||(s>=48&&s<=57))){c(y)}return}if(s===0){return}w=this._txt;if(v!==l){while(--l>=v){w=w.substring(0,l)+i.charAt(l)+w.substring(l+1)}l++}else{if(s===7){while(l<n&&i.charCodeAt(l)>=22){l++}if(l>=n){return}w=w.substring(0,l)+i.charAt(l)+w.substring(l+1);l++}else{if(s===8){while(l>0&&i.charCodeAt(l-1)>=22){l--}if(l--<1){return}w=w.substring(0,l)+i.charAt(l)+w.substring(l+1)}}}if(s>8&&l<n){if(l>=n){return}if((v=this._maskKey(s,g,w,n,l,i))>=0){w=this._txt;l=v}else{if(v===-1){return}while(i.charCodeAt(l)>=22){if(++l>=n){return}}if(e(g=this._maskFilter(i.charCodeAt(l),g,0))){return}w=w.substring(0,l)+g+w.substring(l+1);l++}}this._txt=w;this._selKey=l;w=this._focusTxt(true);this.select(this._selKey,0,w);this._selKey=99999;this._listSelect(-1);return}if(j>3){o=this._prop(4);q=this._isMinus(s);r=s>=48&&s<=57;if(q&&v===0){p=this._prop(10);if(!e(p)&&p>=0){return c(y)}}if(h){if(!(s<9||q||r||s===o.charCodeAt(0))){c(y)}return}if(v!==l){w=w.substring(0,v)+w.substring(l);l=v;n=w.length}else{if(s===7){if(l++>=n||n<1){return}}else{if(s===8){if(v--<1){return}}}}if(s<9||z===0||z>n){x=s===o.charCodeAt(0);t=w.indexOf(o);f=this._prop(8);u=r||(v===0&&q)||(x&&f>0);m=this._ePow();i=m?w.indexOf(m):-1;if(m&&v>0){if((s===69||s===101)&&i<0){u=g=m}if(x&&i>=0&&i<v){u=false}}if(i<0&&r&&t>=0&&v>t&&t+f<n){if(v===n){u=false}else{w=w.substring(0,--n)}}if(v>0&&q&&w.charAt(v-1).toUpperCase()==="E"&&w.substring(v-1).indexOf("-")<0){u=true}if(n>0&&v===0){if(this._isMinus(w.charCodeAt(0))){u=false}}if(s>8&&!u){return}if(x){if(t>=0){if(t===v||t===v-1){return}n--;if(t<v){v=--l}w=w.substring(0,t)+w.substring(t+1)}if(i<0&&v+f<n){w=w.substring(0,n=v+f)}}if(s>8&&l>=n){w+=g}else{w=w.substring(0,v)+g+w.substring(l)}}else{s=0}this.select((s>10)?l+1:v,0,w);this._listSelect(-1);return}if(v!==l){w=w.substring(0,v)+w.substring(l);l=v;n=w.length}else{if(s===7){if(l++>=n||n===0){return}if(this._ta&&w.charCodeAt(l-1)===13&&w.charCodeAt(l)===10){l++}}else{if(s===8){if(v--<1){return}if(this._ta&&w.charCodeAt(v)===10&&w.charCodeAt(v-1)===13){v--}}}}if(s<9||z===0||z>n){if(s>8&&l>=n){w+=g}else{w=w.substring(0,v)+g+w.substring(l)}}else{s=0}this._matchList(w,s,(s>10)?l+1:v)},_matchList:function(g,i,f){var h;if(this._type>0||(i<0&&!this.options.listAutoComplete)){return g}if(!(h=this._findItem(g,i,f))){return null}this._listSelect(h.id);g=h.text;if(i>=0){this.select(h.sel,0,g)}else{this._field[0].value=g}return g},_findItem:function(h,i,g){var f=this.options;return this._find(h,i,f.listMatchOnly,f.listMatchIgnoreCase,true,f.listMatchContains,g)},_find:function(t,m,h,u,v,o,j){var y,r,x,f=null,n=-1,p=0,w=0,q=-1,k=t,l=t.length,g=this.options.listItems,s=m>=0&&h;if(l>0&&g&&(s||m<0)){x=s=-1;r=u;if(r){k=k.toUpperCase()}while(++n<g.length){if(e(y=this._item(g[n]))){continue}y=y.toString();if(r){y=y.toUpperCase()}if((w=y.indexOf(k))===0){if(y===k){s=n;break}p++;if(x<0){x=n}}else{if(w>0&&o){if(!f){f={i:n,shift:w}}p++}}}w=0;if(x<0&&f){x=f.i;w=f.shift}if(s<0){if(!v){return null}if(m<0){s=x}else{if(x<0){return(m>10&&l===j)?null:this._find(t.substring(0,--l),m,h,u,o,j)}else{if(m>10&&p===1){s=x}else{t=this._item(g[x]).toString().substring(0,l+w)}}}}if(s>=0){t=this._item(g[s]).toString();if(s===x){j=t.length}}q=(s>=0)?s:x}return{text:t,id:q,sel:(e(j,1)?l:j)+w}},_undo:function(f){var h,g=this._old;if(f){if(!this._canRedo){return}g=this._redo;this._canRedo=false}else{h=this._instant(1,null,1);if(h===g){return}this._canRedo=true;this._redo=h}this._set_val(g);this._text=this._focusTxt(false)},_doKey0:function(s,r){var m,t,l,f,i,h=this._validator,g=this,j=this._text,n=this._val(),p=this._key,q=this.options;if(!this._field){return}if(!s){if(j!==n){this.paste(n)}return}if(r===1&&p===192&&s.altKey&&!s.ctrlKey){return}if(this._type>0&&a.browser.opera&&p>41&&p<48){if(r===0){this._noKey=p}else{if(this._noKey===p){c(s)}}}if(r!==1){this._noPaste=2-r}else{if(this._noPaste!==2){this._noPaste=1}}if(p===9){this._k0=(r===2)?0:9;if(r===0&&h&&h._lbl){c(s)}}if(p===0||(p===114&&r!==1)||p===9){return}if(this._bad>2){if(r===0){this._bad=2}if(r===2){this._bad-=3}}if(r===0&&p===229){if(j!==n){this._bad=2}else{this._bad+=3}}if(p===13&&this._k0===229&&this._type===1){this._txt=this._setTxt(this._val(),5,true)}if(r===0&&s.ctrlKey&&!s.altKey&&(p===90||p===89)){this._undo(p===89);return}if(this._bad===2||(r===1&&s.ctrlKey)){return}if(r===0&&!s.ctrlKey&&!s.altKey&&!s.shiftKey){if(this._listKey(s,p)){this._kBad=p;return c(s)}}if(this._box){return}if(r===1&&p===this._kBad){return c(s)}this._kBad=null;if(r===0&&((s.ctrlKey&&(p===86||p===88))||(s.shiftKey&&p===45))){setTimeout(function(){g._doKey0()},1)}if(r!==1&&(s.ctrlKey||s.altKey||p===17)){if(s.altKey){this._k0=-1}else{if(j!==n&&(p===86||(p===17&&r===2))){this.paste(n);this._noPaste=1}else{if(p===17){this.getSelectedText()}}}return}if(r===0){this._k0=p}if(r===2){if(this._k0>0){this._k0=0}this._spinField=-1}l=n.length;h=this._bad!==0;if(p<=46){switch(p){case 8:case 46:if(this._k0===p&&r===1){r=2}if(r===0){r=1;if(p===46){p=7}}break;case 27:c(s);if(r===0){this._undo()}return;case 13:if((q.hideEnterKey&&(!this._ta||!s.shiftKey))||(this._type>0&&this._ta&&s.shiftKey)){c(s)}return;case 38:case 40:if(this._ta){break}if(r===0&&!s.shiftKey){this._spin((p===38)?q.spinDelta:-q.spinDelta)}if(this._k0===p){r=2}break}}if(r===1&&p===this._k0&&((p<48&&p>9&&p!==32)||p>90)){return}if(!h){if(r!==0&&p!==9){c(s)}if(r===1&&this._k0===-1){this._k0=0;this.getSelectedText()}if(r===0||p<9){this.getSelectedText()}}if(r===1&&p>6){if(p>31){if(this._fire(1,s)){if(h){c(s)}return}p=this._key;f=q.excludeKeys;i=q.includeKeys;if(q.toUpper||q.toLower||f||i){m=String.fromCharCode(p);t=m.toUpperCase();if((f&&f.toUpperCase().indexOf(t)>=0)||(i&&i.toUpperCase().indexOf(t)<0)){return c(s)}if(q.toUpper){p=t.charCodeAt(0)}else{if(q.toLower){p=m.toLowerCase().charCodeAt(0)}}this._key=p}}this._doKey(p,(p<10)?"":String.fromCharCode(p),n,l,this._sel0,this._sel1,h,s)}},paste:function(i,h){var g,f=this.options;if((this._nullT&&!h)||this._noPaste===1){return this}g=this._prop(12);if(g>0&&g<i.length){i=i.substring(0,g)}g=f.includeKeys;if(g){g=g.toUpperCase().replace(/\[/gm,"\\[").replace(/\]/gm,"\\]").replace(/\^/gm,"\\^").replace(/\-/gm,"\\-");i=i.replace(new RegExp("[^"+g+"]","igm"),"")}g=f.excludeKeys;if(g){g=g.toUpperCase().replace(/\[/gm,"\\[").replace(/\]/gm,"\\]").replace(/\^/gm,"\\^").replace(/\-/gm,"\\-");i=i.replace(new RegExp("["+g+"]","igm"),"")}if(f.toUpper){i=i.toUpperCase()}else{if(f.toLower){i=i.toLowerCase()}}if(e(i=this._matchList(i,0))){i=this._text}this._text="";this._fix=0;this.text(i,h?null:this._sel0);this._fix=1;this._fire(12);return this},_fixCss:function(){var k,g,f,q,m=this._hoverOld,r=this._hover,s=this._mouseDown,p=this._fcs>0,l=this.options,h=this._ddList,n=this._css,j="";if(!this._field){return}f=l.disabled;q=this.css;this._hoverOld=r;if(!m||m===r){m=0}if(m>99){if(!h){return}this._listCss(h,m,q.listItemHover)}if(r>99){this._listCss(h,r,q.listItemHover,1)}if(r){n+=" "+q.hover}else{if(!f&&!p){n+=(j=" "+q.borderColor)}}if(f){n+=" "+q.disabled}if(p){n+=" "+q.focus}else{if(this._nullT){n+=" "+q.nullValue}}if(this._type>3&&q.negative&&!this._nullT){if(this._instant(1)<0){n+=" "+q.negative}}this._setCss(this._field,n);g=this._buttons?3:0;while(g-->0){if(!(k=this._buttons[g])){continue}q=k._css;n=q[0];if(f){n+=" "+q[3]}if(r){n+=" "+q[1]}if(p){n+=" "+this.css.buttonFocus}if(s===g+1){n+=" "+q[2]}this._setCss(k,n+j);n=q[4];if(f){n+=" "+q[7]}if(s===g+1){n+=" "+q[6]}else{if(r===g+1){n+=" "+q[5]}else{if(r||p){n+=" "+this.css.buttonsImageStateOverride}}}this._setCss(k.find("SPAN"),n)}},_setCss:function(h,g){var f=h[0].className,i=h[0]._ig_oldCss;h[0]._ig_oldCss=g;if(g===i){return}if(i&&f&&i!==f&&f.indexOf(i)>=0){f=f.replace(i,"");g+=((f.charAt(0)!==" ")?" ":"")+f}h[0].className=g},_enterTxt:function(){var f,g=this._type;if(g===1){return this._getTxt(this._dataMode,"")}if(g===2||g===3){f=this._toDate(this._val(),true);return e(f)?"":this._toTxt(f,true,"")}if(g>3){return this._toTxtNum(null,true,this._val(),"-",".")}return this._val()},_update:function(){var g,f=this._old;if(this._lock){return}this._lock=true;this._text=this._focusTxt(false,(this._fcs===2||this._hadFocus)?"":null);g=this._instant(1,null,1);if(!e(g)&&!e(f)){if(g.getTime&&g.getTime()===f.getTime()){g=f}}if(g!==f||this._bad===2){this._val10=g;if(this._fire(10,null,g,f)){this._set_val(f);this._text=this._focusTxt(false)}else{if(g!==this._val10){this._setVal(this._val10)}this._repaint();this.options.value=g=this._instant(1,null,1);this._fire(11,null,g,f);if(this._k0!==13){this._old=g}this._dtt()}}this._lock=false},_dropTrigger:function(l,f){var h,g,m,i=this.options,j=this._ddOn;m=i.dropDownTriggers;if(f===0||!m||(i.readOnly&&!i.dropDownOnReadOnly)||(f===-2&&m.indexOf("button")<0)||(f===-1&&m.indexOf("focus")<0)){return}if(((f===38&&!j)||(f===40&&j))){return}if(f>0){g=(f===38||f===40)?"arrow":String.fromCharCode(f);if(l.ctrlKey){g="ctrl+"+g}else{if(l.altKey){g="alt+"+g}else{if(l.shiftKey){g="shift+"+g}}}h=g.length;g=m.indexOf(g);if(g<0||(g>0&&m.charAt(g-1)!==",")||(g+h<m.length&&m.charAt(g+h)!==",")){return}}if(!j||f!==-1||new Date().getTime()-j>900){return this._doDrop(1,l)}},_doDP:function(g,h){var i,k,f,j;if(this._type!==3){return}if(!this._dp&&g!==1){return 1}if(h){this._set_val(h);this._fire(12)}k=a.datepicker;f=this._field[0];j=f.id;if(!k._old_selectDay){k._old_selectDay=k._selectDay;k._old_parseDate=k.parseDate;k._old_updateDatepicker=k._updateDatepicker;k._old_checkOffset=k._checkOffset;k.dpDiv.bind("mousedown",function(l){if(a.datepicker._ig_dp){c(l)}});k._selectDay=function(m,o,n,p){var l=this._ig_dp;if(!l){return this._old_selectDay(m,o,n,p)}if(!(m=a("a",p).html())){m=p.firstChild.innerHTML}l._doDrop(0,{type:"mousedown"},[n,o,b(m)],1)};k._updateDatepicker=function(l){if(this._ig_dp){this.dpDiv.addClass(this._ig_css=this._ig_dp.css.dropDown)}else{if(this._ig_css){this.dpDiv.removeClass(this._ig_css);delete this._ig_css}}this._old_updateDatepicker(l);if(this._ig_dp){this.dpDiv.find("*").attr("unselectable","on")}};k.parseDate=function(l,m,n){return this._ig_dp?this._ig_dp._getVal(1):this._old_parseDate(l,m,n)};k._checkOffset=function(m,o,l){var n=this._ig_dp;o=this._old_checkOffset(m,o,l);if(n){o.left-=n._leftShift()}return o}}if(g===1){if(j.length<1){j=this.element[0].id+"_ig_dp_id";while(document.getElementById(j)){j+=Math.floor(Math.random()*10)}f.id=j}if(!this._dp){i=this.options.regional;if(!(i=a.extend(this.options.datepickerOptions,this._dpRegion()))){i={}}i.showOn="";i.onClose=function(){var l=k._ig_dp;if(l){l._dpClosed=1;l._doDrop();delete l._dpClosed;delete k._ig_dp}};this._dp=a(f).datepicker(i)}k._ig_dp=this;this._css+=" "+a.datepicker.markerClassName;k._showDatepicker(f)}else{if(g===2){k._doKeyUp({target:f})}else{if(!this._dpClosed){k._hideDatepicker(f)}if(g===3){k._destroyDatepicker(f)}}}return 1},_fixBC:function(f,g){f=f.css("backgroundColor");g.css("backgroundColor",(!f||f==="transparent"||f.replace(/ /g,"").indexOf("(0,0,0,0")>0)?"white":f)},_doDrop:function(F,u,K,h){var E,s,p,A,O,w,g,t,n,M,z,v,k,j,D,l,L,q,C,r,x,J,f,I,N=this._ddParent,H=-1,m=K,G=this,B=this.options;I=B.listItems;F=(F===1)?!this._ddOn:false;if(!F&&!this._ddOn&&!h){return}f=I?I.length:0;if(this._type===3){if(K&&!isNaN(K[2])){if(!(m=this._getVal(1))){m=new Date(K[0],K[1],K[2])}else{m.setDate(10);m.setFullYear(K[0]);m.setMonth(K[1]);m.setDate(K[2])}}}else{if(f<1){return}if(K){m=this._item(I[K-100])}}if(this._fire(F?16:17,u,F?null:{value:m})&&u){return}this._ddOn=F?new Date().getTime():null;if(this._type===3){return this._doDP(F?1:0,m)}r=G._ddList;x=G._element;J=!B.listDropDownAsChild||x===G._field;if(!r){r=G._ddList=a("<div/>").addClass(G.css.dropDown+" "+G.css.list).scroll(function(){G._lazy()});r[0]._id=99;r._sel=-1;r._len=f;r.css({position:"absolute",visibility:"hidden"});if((C=B.listWidth)<5){if((C=x.outerWidth())<5){C=100}}if(J){G._ddParent=N=B.theme?a("<span/>").addClass(B.theme).css("position","absolute").append(r):r;N.css({left:"0px",top:"0px"}).appendTo(a("body"));r.bind(G._mEvts)}else{G._ddParent=N=r.prependTo(x)}E=r.css("borderRightColor");z=Math.max(1,B.listColumns);v=r._rows=Math.ceil(f/z);k=r.outerWidth()-r.width();C=Math.ceil((C-k)/z-1);G._listLazy=[];for(M=0;M<z;M++){for(n=0;n<v;n++){if(++H>=f){break}j='<div style="width:'+C+"px;position:absolute;white-space:nowrap;overflow:hidden;";m=G._item(I[H]);if(typeof m!=="string"){if(G._type>=4&&typeof m==="number"){m=G._toTxtNum(m)}else{if(m&&G._type===2&&m.getMonth){m=G._toTxt(m)}else{m=d(m)}}}L=I[H];if(L&&typeof L.getHtml==="function"){if(!(L=L.getHtml())){L=m}}else{L=m}if(H>0){j+="height:"+A+"px;left:"+(M*s)+"px;top:"+n*p+"px;"}if(M+1<z){j+="border-right-color:"+E}j+='" title="'+G._item(I[H])+'" _id="'+(H+100)+'" class="'+G.css.listItem;if(M+1<z){j+=" "+G.css.listItemColumnBorder}j+='">'+((L==="")?"&nbsp;":L)+"</div>";if(H===0||H+1===f){j=a(j).appendTo(r);j[0]._id=H+100}else{G._listLazy[H]=j}if(H===0){if((A=j.height())<5){A=18}if((k=j.outerWidth()-j.width())>0){C-=k;j.css("width",C)}r._width=(s=j.outerWidth()+1)*z;r._height=(r._height0=p=j.outerHeight())*v;G._fixBC(j,r);D=Math.max(0,B.listMaxHeight);if(D>0&&r._height>D){r._height=D;D=Math.ceil(16/z);j.css("width",C-=D);s-=D}else{D=0}r.css("overflow",(D>0)?"auto":"hidden");j.css({height:A,left:M*s,top:n*p})}}}r._page=Math.max(2,Math.floor(Math.min(r._height/A),f/3)-1)}if(K){if(!G._listSelect(K-100)){G._set_val(m=this._item(I[K-100]));G._fire(12)}}G._listSelect(null,1);m=F?B.listAnimationShow:B.listAnimationHide;if(!m||m<5){m=null}r._hEnd=m?0:r._height;l=function(){if(F){r.css("filter","");G._listSelect();if(!r._fixW&&(H=r[0].scrollWidth-r[0].clientWidth)>0&&H&&H<4){r.css("width",r._width+=(r._fixW=H+1))}}else{r.css({display:"none",visibility:"hidden"})}};if(F){this._lazy();if(G._fcs<1){G.setFocus()}w=999;t=document.body;L=document.documentElement;if((H=window.innerHeight)>50&&H){w=H}else{if((H=L.clientHeight)>50&&H){w=H}else{if((H=t.clientHeight)>50&&H){w=H}}}g=Math.max(t.scrollTop,L.scrollTop);L=G._swap?G._field:x;q=L.offset();q.h=L[0].offsetHeight;if((O=q.top+q.h+r._height-g-w)>0&&g-q.top+r._height<O){if(q.top-(O=r._height+2)<g){O=Math.max(q.top-g,2)}q.top+=(q.h=-O);r._hEnd=r._height}else{q.top+=q.h}r.css({opacity:m?0:1,height:r._hEnd,width:Math.floor(r._width/(m?2:1)),display:"",visibility:"visible"});if(J){if(G._swap){q.left-=G._leftShift()}N.css({left:q.left,top:q.top})}else{N.css({marginTop:q.h,marginLeft:0});O=N.offset();if((O=O.left-q.left)>30&&O<x[0].offsetWidth+10){N.css("marginLeft",-O+"px")}}if(m){r.animate({opacity:1,height:r._height,width:r._width},m,null,l)}else{l()}}else{if(m){r.animate({opacity:0.6},Math.floor(m*0.34)).animate({opacity:0,height:r._hEnd,width:Math.floor(r._width/2)},Math.floor(m*0.66),null,l)}else{l()}}return true},_lazy:function(f){var k,g,l=Math.max(1,this.options.listColumns),m=this._listLazy,h=this._ddOn?this._ddList:null;if(!h){return}if(f){if(m[f]){a(m[f]).appendTo(h)[0]._id=f+100;delete m[f]}return}k=Math.floor(h[0].scrollTop/h._height0);while(l-->0){for(f=0;f<h._page+8;f++){if(m[g=h._rows*l+k+f]){a(m[g]).appendTo(h)[0]._id=g+100;delete m[g]}}}},_listCss:function(i,f,h,g){i=a(i.children("[_id="+f+"]"));if(g){i.addClass(h)}else{i.removeClass(h)}},_listSelect:function(j,i){var l,g,h,m=null,f=(i!==2&&(i||this._ddOn))?this._ddList:null,k=this.options;if(!k.listItems){return}if(!e(j)&&this._listID!==j){if(this._fire(18,null,m={index:j,oldIndex:this._listID,item:k.listItems[j]})){return 1}this._listID=j}j=this._listID;if(f){if(i&&j<0){if(!e(i=this._findItem(this.text(),-1))&&j!==i.id){if(this._fire(18,null,m={index:i.id,oldIndex:j,item:k.listItems[i.id]})){return 1}this._listID=j=i.id}}if((h=f._sel)!==j){this._lazy(j);this._listCss(f,h+100,this.css.listItemSelected);this._listCss(f,(h=f._sel=j)+100,this.css.listItemSelected,1)}if(h>=0){if((l=(h%f._rows)*f._height0)>(g=f[0].scrollTop)){if((l+=f._height0-f._height)<g){l=-9}}if(l!==-9){if(a.browser.safari&&l>20&&f[0].scrollTop===l&&!i){f[0].scrollTop=l-1}f[0].scrollTop=l}}}if(m){this._fire(19,null,m)}},_listKey:function(n,h){var g,j,f=this._ddOn?this._ddList:null,l=this._listID,m=a.ui.keyCode;if(!f){return}if(h===m.ENTER||h===m.SPACE||h===m.ESCAPE){this._doDrop(0,n,(h===m.ESCAPE)?null:l+100);return true}if(h<33||h>40){return}j=f._len-1;if((g=l)<0){g=-1000}if(h===m.DOWN){g++}else{if(h===m.UP){g--}else{if(h===m.PAGE_DOWN){g+=f._page}else{if(h===m.PAGE_UP){g-=f._page}else{if(h===m.HOME){g=0}else{if(h===m.END){g=j}else{if(h===m.RIGHT){if((g+=f._rows)>j){g=l}}else{if(h===m.LEFT){if((g-=f._rows)<0){g=l}}else{return}}}}}}}}this._listSelect(Math.max(0,Math.min(g,j)));return true},_listChange:function(m,f,h){var l,k,g,n=this.options.listItems;l=n?n.length:0;g=k=m?m.length:0;f=(e(f)||f<0)?-1:f;if(h<2){if(l<1){return this}if(h>0&&f<0){if(m===null){f=l-1}else{while(++f<l){if(n[f]===m){break}}}}if(f<0){n.length=0}else{if(f<l){n.splice(f,1)}}}else{if(!n){this.options.listItems=m}else{while(g-->0){if(f>=l||f<0){n.push(m[k-g-1])}else{if(f===0){n.unshift(m[g])}else{n.splice(f,0,m[g])}}}}}this._listRemove();return this},_listRemove:function(){if(this._ddList){this._ddList.unbind();this._ddParent.remove();this._ddOn=this._ddList=this._ddParent=this._listLazy=null;this._listID=-1}},_initValidator:function(g){var h=this._validator,f=this.options.validatorOptions;if(g||!f||!this.element.igValidator){if(h){h.destroy();delete this._validator}return}f.ctl=this;f.required=this.options.required;this._field.igValidator(f)},_doError:function(g,i,h){var f=this._validator;if(f){if(!e(h)){return f._doError(h,null,g)!==1}else{if(g){f._evt(i,null,g===2);if(f._lbl){f._lbl._old={t:new Date().getTime(),val:this._val(),sel0:this._sel0,sel1:this._sel1,lastTxt:this._lastText,last:this._last,txt:this._text}}}else{f.hide(1)}}}},_doScrl:function(g,o){var k,n,i=a.browser.mozilla&&!this._dp,h=g.clientWidth,p=g.scrollWidth,m=o.length,q=false,j=this._sel0;if(this._tr!==1||m<4){return}k=p/m*1.1;m-=j;if(this._ta){if(g.clientHeight+2>(p=g.scrollHeight)){return}o=o.split("\n");if(m*15<h&&(i||o[o.length-1].length*15>h)){g.scrollTop=p;return}if(!i){return}}else{if(j*15<h){return}}if(!i){if(p>h+2){if(m*k*1.3<h){g.scrollLeft=p}else{if(j*k>h+g.scrollLeft){g.scrollLeft=Math.floor(j*k-h-3)}}}return}this._scrl=1;try{n=document.createEvent("KeyboardEvent");n.initKeyEvent("keypress",!q,!q,null,q,q,q,q,0,32);g.dispatchEvent(n);n=document.createEvent("KeyboardEvent");n.initKeyEvent("keypress",!q,!q,null,q,q,q,q,8,0);g.dispatchEvent(n)}catch(l){}delete this._scrl},_onEvt:function(k,i){var h,l,f=this._field,j=this;f=f?f[0]:null;if(!f||j._scrl){return}j._evt=k;if(i<11){j._doEvt(k,i,f);delete j._evt}else{h=f.value;try{if(j._nullT&&k&&k.type==="drop"&&!e(l=k.originalEvent.dataTransfer)){l=l.getData("Text")}}catch(g){l=null}j._pasting=1;setTimeout(function(){if(!l){if(!j._field){return}l=f.value}if(l&&h!==l){j.paste(l,1)}delete j._pasting},0)}},_doEvt:function(s,f,u){var j,i,l,r,t,w,p,m=null,n=0,g=this,q=this.options;if(g._noWidth){g._fixWidth()}if(!s||q.disabled){return}if(f===10){if(!(m=s.wheelDelta)){m=s.detail}if(m){c(s);g._spin((m>0)?q.spinDelta:-q.spinDelta)}return}j=p=s.target;while(j&&n++<4&&!(m=j._id)){j=j.parentNode}if(f===7){g._hover=g._mouseDown=0;g._fixCss();g._fire(f,s,m);return}if(!m){return}if(f===6){if(m>0&&!p.unselectable){p.unselectable="on"}j=u.value;if(j===g._lastText||g._pasting){j=null}if(!g._fcs&&j&&g._nullT){if(j!==q.nullText){g._fixNull()}j=null}if(j){g.paste(j,1)}}if(m>4&&m<8){m-=4}if(f===0&&g._fcs===0){g._onEvt({target:p,type:"focus"},8)}if(e(g._evt0Spin1)&&!g._box){try{if(!(a.browser.msie&&!g._ta)&&!e(u.selectionStart)){g._tr=1}}catch(h){}if(g._tr!==1){g._tr=u.createTextRange?u.createTextRange():null}g._bad=e(g._tr)?1:0}g._evt0Spin1=0;if(f===5&&g._fcs===2&&s.button===1){g.getSelectedText()}w=(new Date()).getTime();if(f<3){if(!(n=s.keyCode)){if(!(n=s.which)){n=0}}g._key=n;g._time=w}if(f!==1&&f<8){if(g._fire(f,s,m)){if(f<4){c(s)}return}}if(f<3){if(f===0&&(g._fcs===2||q.dropDownOnReadOnly)&&g._dropTrigger(s,n)){return}if(g._fcs===1&&(s.shiftKey||f===1||!(q.spinOnReadOnly||(q.dropDownOnReadOnly&&g._ddOn))||n<9||n>40)){return}if(f===2&&g._k0===0&&n>0&&n!==86&&g._text!==g._val()){u.value=g._text;return}}if(f===3&&m>0){if(m===99){this._ddmd=w}c(s)}if(f===3&&g._mouseDown!==m){if(m>1&&m<4){g._stopTimer();if(!q.readOnly||q.spinOnReadOnly){t=(m===2)?q.spinDelta:-q.spinDelta;if(g._fcs<1&&q.focusOnSpin){g._evt0Spin1=1;g.setFocus()}g._spin(t);l=r=5;g._spinField=-1;g._timer=setInterval(function(){if(g._mouseDown<2){return g._stopTimer()}if(--l<1){g._spin(t);l=(--r>8)?--r:r}},60)}}g._hover=g._mouseDown=m;g._fixCss()}if((f===5||f===6)&&g._hover!==m){g._hover=m;g._fixCss()}if(f===4&&g._mouseDown){if(m===1&&m===g._mouseDown){if(!g._fire(15,s)){if(g._clear){g._onEvt(null,11);g._set_val(null);g.select(0)}else{g._dropTrigger(s,-2)}}}if(m>99){g._doDrop(0,s,m)}g._mouseDown=0;g._fixCss()}if(m>0){return}i=g._focTime;if(f===4){if(i&&i+500>w){g._select()}g._focTime=0}if(f<3){g._doKey0(s,f)}j=g._val();if(f===2){g._last=j;if(g._key===13&&a.browser.mozilla&&g._text!==j){g.text(j);g._fire(12,s);g._update()}}if(f===1&&g._keyMod){delete g._keyMod;g._doScrl(u,j)}if(f>=8){if(g._bad>2){g._bad=2}g._spinField=-1;i=(f===8);if(i===(g._fcs>0)){return}if(!i&&w-this._ddmd<500){return g.setFocus(-1)}g._noPaste=0;if(!i&&g._lastText!==j){g.paste(j,1)}if(!i&&g._type<2&&!j&&!q.nullable){if(!(j=g._old)){j=q.listItems?q.listItems[0]:""}if(j){g._set_val(j);j=g._text=g._focusTxt(false)}else{j=""}}g._fcs=i?(q.readOnly?1:2):0;m=a.ui.igEditor._keepFoc;if(m){if(m!==g){return}if(!i){a.ui.igEditor._keepFoc=null}}g._hadFocus=!i;m=g._validator;if(i){g._k0=0;if(g._bad>1){g._bad=0}if(!q.readOnly){if(g._nullT){j=g._last=g._text=u.value=""}g._nullT=null;m=(m&&m._lbl)?m._lbl._old:null;if(m&&m.t+200>new Date().getTime()){u.value=g._text=m.txt;g._lastText=m.lastTxt;g._last=m.last;g.select(m.sel0,m.sel1)}else{if(j!==g._text){g.getSelectedText();g.paste(j)}g._lastText=g._last=g._text=g._focusTxt(i,s)}}g._focTime=w;g._dropTrigger(s,-1)}else{if(m){g._doError(2,s);setTimeout(function(){if(!g._fcs&&!g._doInvalid(s,9)){g._doError()}},100)}g._doDrop(0,s);j=g._matchList(j,-1);g._canRedo=null;if(!q.readOnly){if(g._last!==j||g._bad!==0){m=g._fix;g._fix=0;g._fcs=2;g.text(j);g._fcs=0;g._fix=m}g._update()}}g._repaint();g._fixCss();if(i&&this._prop(13)<2){g.select(this._prop(13)*10000);g._select()}g._hadFocus=false;if(i&&g._focSpin){g._spin(g._focSpin)}g._focSpin=null;g._fire(f,s,-1);g._lastText=g._val();return}if(!(f>3&&g._k0===0)&&!g._nullT&&j!==g._text){g._text=j;g._fire(12,s)}},_fire:function(h,k,g,i){var j,f=this.events,l=(h===13||h>16)?g:{};for(j in f){if(f.hasOwnProperty(j)&&f[j]===h){break}}if(h===14){l.delta=g;l.value=this._instant(1,null,1)}if(h===12){if((l.oldText=this._lastText)===(g=this._val())){return}this._doError(1,k);this._doClear(g);l.text=this._lastText=this._text=g;if(this._fcs<2&&this._evt0Spin1!==1){this._update()}this._doDP(2);if(this._type>3){this._fixCss()}}if(h<3){l.key=this._key}else{if(h<8){l.elementType=(g===-1)?"field":((g===1||g===5)?"button":((g===2||g===6)?"spinUpper":((g===3||g===7)?"spinLower":((g===99)?"dropDown":((g>99)?"item"+(g-100):"")))));l.id=g}}if(h===10||h===11){l.value=g;l.oldValue=i}if(h===11&&this._fcs===2){this._update()}l.owner=this;if(!this._trigger(j,k?k:this._evt,l)){return true}if(h<3){this._key=l.key}if(h===10){this._val10=l.value}},_select:function(i){var j,f=this,g=this._field[0],h=this._prop(13);if(this._tr!==1||h>1){return}if(!i){setTimeout(function(){try{f._select(1)}catch(k){}},0);return}j=g.value.length;if(h===0){j=0}else{if(h<0){h=0}else{h=j}}if(h!==g.selectionStart||j!==g.selectionEnd){this.select(h,j)}},select:function(p,m,l){var h,g,q=0,n=0,k=this._tr,f=(this._fcs===2)?this._field[0]:null;if(!f||f.offsetWidth<2||this._box){return this}if(e(l)){l=f.value}else{m=p;if(f&&f.value!==l){this._keyMod=f.value=l}}g=l.length;if(e(m,1)){m=p;if(e(p,1)||p<0){p=0;m=g}}if(m>=g){m=g}else{if(m<p){m=p}}if(p>m){p=m}this._sel0=p;this._sel1=m;try{if(k===1){f.selectionStart=p;f.selectionEnd=m;return this}if(!k){if(p!==m){f.select()}return this}if(this._ta){h=m;while(h-->0){if(l.charCodeAt(h)===10){if(h<p){q++}n++}}p-=q;m-=n}m-=p;if(this._ta){k.moveToElementText(f)}else{k.move("textedit",-1)}k.move("character",p);if(m>0){k.moveEnd("character",m)}k.select()}catch(o){}return this},getSelectedText:function(){var g,j,k,m="",f=this._field[0],h=this._tr,l=(this._sel0=this._sel1=0);if(e(h)){return m}if(h===1){if((this._sel0=f.selectionStart)<(this._sel1=f.selectionEnd)){m=f.value.substring(this._sel0,this._sel1)}return m}try{j=document.selection.createRange();k=f.value;g=k.length;h=j.duplicate();if(this._ta){h.moveToElementText(f)}else{h.move("textedit",-1)}try{while(h.compareEndPoints("StartToStart",j)<0){h.moveStart("character",1);l++;if(this._ta&&k.charCodeAt(l)===10){l++}if(l>g){break}}}catch(n){}m=j.text}catch(o){}this._sel0=l;this._sel1=l+m.length;return m},getSelection:function(f){this.getSelectedText();return f?this._sel0:this._sel1},setFocus:function(f){var g=this;if(g._field){if(f===-1){try{g._field[0].focus()}catch(h){}}else{setTimeout(function(){if(g._fcs<1){g.setFocus(-1)}},f?f:0)}}return this},hasFocus:function(){return this._fcs>0},_jpn:function(f){return(this._sTxt===1&&f>65295&&f<65306)?(f-65248):f},_dtt:function(){var j,g,h=this._oldAttr.title,i=this.options;if(i._id){g=i._vsFormat;if(e(j=this._getVal(1),this._type>3)){j=""}else{if(this._date){j=j.getFullYear()+"-"+(j.getMonth()+1)+"-"+j.getDate()+" "+j.getHours()+":"+j.getMinutes()+":"+j.getSeconds()+"."+j.getMilliseconds()}else{if(g&&this._type>3){j=j.toString().replace(".",g)}}}a("#"+i._id).val(j)}if(!h||h.indexOf("{0}")<0){return}if((j=this._val())===""){j=this.options.nullText}this._element[0].title=this._field[0].title=this._field[0].alt=h.replace("{0}",j)},_stopTimer:function(){if(this._timer){clearInterval(this._timer)}this._timer=null},_maskFlag:function(g,f){switch(g){case">":return -1;case"<":return -2;case"&":g=1;break;case"C":g=2;break;case"A":g=7;break;case"a":g=8;break;case"L":g=13;break;case"?":g=14;break;case"0":return 19;case"9":return 20;case"#":return 21;default:return 0}return g+f*2},_maskFilter:function(l,k,g,h){var j,m;if(g>=k.length){return h}j=k.charCodeAt(g);m=Math.floor((l-1)/6);k=k.charAt(g);if(j<22){return h}if((m===1||m===3)&&j>100){if((j=this._jpn(j))<100){k=String.fromCharCode(j)}}if(m===3){return((l===21&&(k==="-"||k==="+"))||(j>47&&j<58))?k:h}if(m===1||m===2){if(m===1&&j>47&&j<58){return k}if(j<256&&k.toUpperCase()===k.toLowerCase()){return h}}if((l=Math.floor((l-1)/2)%3)===0){return k}return(l===2)?k.toLowerCase():k.toUpperCase()},_getTxt:function(k,n,j,s){var g,l,p,q=this._selKey,h=this._mask,r="",f=!e(j),m=this.options;if(!f){j=(this._bad!==0&&this._fcs>1)?this._val():this._txt}if(f){f=this._type===1}if(e(j)||e(h)){return r}l=h.length;q=(this._fcs>1&&!s&&m.hideMaskOnFocus)?((q&&q<l)?q-1:-1):l;for(g=0;g<l;g++){if((p=h.charCodeAt(g))<22){if(g<j.length&&j.charCodeAt(g)>=22){r+=j.charAt(g);if(g>q){q=g}f=false}else{if(k%3===2||(k%3===1&&p%2===1)){r+=(p===21&&n==="")?m.padChar:n}}}else{if(k>=3){r+=h.charAt(g);if(g===q+1){if(this._selKey===g){this._selKey++}q++}}}}if(q++<l){r=r.substring(0,q)}return f?"":r},_setTxt:function(p,l,n){var k,f,g=0,h=-1,m=this._mask,o=this._mask;if(!e(p)){while(++h<m.length){if(l===1000+g){l=this._dataMode}if(g>=p.length){break}if((f=m.charCodeAt(h))<22){if(!e(k=this._maskFilter(m.charCodeAt(h),p,g))){o=o.substring(0,h)+k+o.substring(h+1)}g++}else{if(l>=3){g++}}}}if(n){return o}this._txt=o;this._text=this._focusTxt(this._fcs>1," ");this._repaint()},_setMask:function(l){var h,j,g,f=0,m=0,k="",o="",n=this._getTxt(0);for(g=0;g<l.length;g++){if((h=this._maskFlag(j=l.charAt(g),m))!==0){if(h<0){m=(m===-h)?0:-h;continue}k+=(j=String.fromCharCode(h));j=this._maskFilter(h,n,f++,j)}else{if(j==="\\"&&g+1<l.length&&this._maskFlag(l.charAt(g+1),0)!==0){k+=(j=l.charAt(++g))}else{k+=j}}o+=j}this._txt=o;this._mask=k},_getMask:function(h,n,l){var j,g,f=0,k=-1,m="";if(!n){n=""}if(l){n=n.replace("dddd","ddd").replace("ddd,","").replace("ddd ","").replace(" ddd","").replace("ddd","")}n=n.replace(/\x08/g," ").replace(/\x09/g," ");n=n.replace(/\\f/g,"\x01").replace(/\\d/g,"\x02").replace(/\\s/g,"\x03").replace(/\\m/g,"\x04").replace(/\\t/g,"\x05").replace(/\\H/g,"\x06").replace(/\\h/g,"\x07").replace(/\\M/g,"\x08").replace(/\\y/g,"\x09");n=n.replace("fff","24").replace("ff","23").replace("f","22");n=n.replace("dddd",l?"":"21").replace("ddd",l?"":"20").replace("dd","09").replace("d","08").replace("ss","19").replace("s","18").replace("mm","17").replace("m","16");n=n.replace("tt","15").replace("t","14").replace("HH","13").replace("H","12").replace("hh","11").replace("h","10");n=n.replace("MMMM",l?"MM":"07").replace("MMM",l?"MM":"06").replace("MM","05").replace("M","04").replace("yyyy","03").replace("yy","02").replace("y","01");n=n.replace(/\x01/g,"g").replace(/\x02/g,"d").replace(/\x03/g,"s").replace(/\x04/g,"m").replace(/\x05/g,"t").replace(/\x06/g,"H").replace(/\x07/g,"h").replace(/\x08/g,"M").replace(/\x09/g,"y");for(g=0;g<n.length;g++){j=n.charCodeAt(g);if(j<48||j>57){if(!l&&(k=n.charAt(g))==="\\"&&g+1<n.length){if((j=n.charAt(++g))==="\\"){continue}if(j==="0"||j==="9"){m+=k}m+=j}else{m+=n.charAt(g)}continue}k=(j-48)*10+n.charCodeAt(++g)-48;if(!l){h[f++]=k;m+="\x01";continue}h[f++]=k;if(k===14){m+="L"}else{if(k===15){m+="LL"}else{if(k===22){m+="0"}else{m+="00";if(k===3){m+="00"}while(k-->23){m+="0"}}}}}return m},getValueByMode:function(j,k,f){var i,h=this._type,g=this.options.emptyChar;j=this._mode(j,h);if(h===0){return this._val()}if(h>3){i=this._dataMode;this._dataMode=j;k=this.value();this._dataMode=i;return k}if(h===1){return this._getTxt(j,k?"":g,null,f)}i=(this._fcs<2)?(this._isNull?null:this._date):this._toDate(this._val(),true,k);return(j===0)?i:(i?this._toTxt(i,j===1,g):"")},_fieldVal:function(p,m,n,k){var q,h,g=(p%2)*2,l=this.options;if(p<4){q=m.getFullYear()+l.yearShift;if(p===3){g=4}else{q%=100;g=(p===2)?2:0}}else{if(p<8){this.d_s=2;q=m.getMonth()+1;if(p>5){p=this._optVal((p===6)?"monthNamesShort":"monthNames")[q-1];if(p.length>0){return p}}}else{if(p<10){q=m.getDate()}else{if(p<16){q=m.getHours();if(p>13){q=this._optVal((q<12)?"am":"pm");if((p-=13)===(g=q.length)){return q}if(g<p){q+=" "}return q.substring(0,p)}if(p<12){q%=12;if(q===0){q=12}}}else{if(p<18){q=m.getMinutes()}else{if(p<20){q=m.getSeconds()}else{if(p<22){return this._optVal((p===20)?"dayNamesShort":"dayNames")[m.getDay()]}else{q=m.getMilliseconds();h=g=p-21;while(h-->3){q*=10}while(h++<2){q=Math.floor(q/10)}}}}}}}}q=d(q);if(p<20||p>22){p=q.length;if(n){if(g===0){g=2}else{n=false}}if(g>0){if(g<p){q=q.substring(0,g)}else{while(p++<g){q=(n?k:"0")+q}}}}return q},_limits:function(g,i){var f,j=this._prop(10),h=this._prop(11);if(this._type>3){if(e(g,1)&&!this.options.nullable){g=this.options.nullValue;if(!g&&this._dataMode>2){g=0}}if(!e(g,1)){if(!e(j,1)&&g<=j){return i?h:j}if(!e(h,1)&&g>=h){return i?j:h}}return g}if(e(g)){return g}f=g.getTime();if(!e(j)){j=j.getTime()}if(!e(h)){h=h.getTime()}if(!e(j)&&(f<j||(i&&f===j))){g.setTime(i?h:j);return g}if(!e(h)&&(f>h||(i&&f===h))){g.setTime(i?j:h);return g}return null},_date7:function(f){var g;if(f.length<13){return null}f=f.replace(/[\. :]/g,"-").split("-");if((g=f.length)!==7){return null}while(g-->0){if((f[g]=b(f[g],-1))<0){return null}}return new Date(f[0],f[1]-1,f[2],f[3],f[4],f[5],f[6])},_toDate:function(L,H,N,O){var r,f,C,J,u,p=0,A=0,G=-1,w=-1,g=-1,F=-1,E=-1,t=-2,z=-2,q=-2,l=-2,I=-1,x=false,M=null,K={},B=this.options,D=O?null:this._date7(L),k=(H&&O)?this._fields0(L):this._fields1(L,H);J=k.length;if(!D){while(++G<J){w++;r=k[G];f=H?this._field0IDs[G]:this._field1IDs[G];if(f<4){if(r>100&&r>B.yearShift){r-=B.yearShift}if((K.year=g=r)<0){p++}else{A++;C=B.centuryThreshold;if(r<100){if(f<3&&C<0){C=29}if(C>=0){g+=(r>C)?1900:2000}}}}else{if(f<8){if(r<1||r>12){p++}else{K.month=F=r;A++}}else{if(f<10){K.day=E=r;if(r<1||r>31){p++}else{A++}}else{if(f<14){if(r===24){r=0}if(f>11){I=-4}else{if(r===12){r=0}if(r>12){p++}}K.hours=t=r;if(r>23||r<0){p++}}else{if(f<16){w--;if(r>0){I++}continue}else{if(f<18){K.minutes=z=r;if(r>59||r<0){p++}}else{if(f<20){K.seconds=q=r;if(r>59||r<0){p++}}else{if(f<22){w--;continue}else{while(f++<24){r*=10}while(f-->25){r=Math.floor(r/10)}K.milliseconds=l=r;if(r>999||r<0){p++}}}}}}}}}if(r>=0){x=true}if(w<B.minNumberOfDateFields&&p>0){if(O&&x){u=this._optVal("dateFields",2);M="numberOfFields"}p+=9}}}if(I===0&&t>=0&&t<12){K.hours=(t+=12)}if(!D&&(!B.nullable||p<9)){if(A===3){D=new Date(g,F-1,E);if(g<100){D.setFullYear(g)}}else{D=new Date();if(this._date){D.setTime(this._date.getTime())}if(E>0){D.setDate(10)}if(g>=0){D.setFullYear(g)}if(F>0){D.setMonth(F-1)}if(E>0){D.setDate(E)}}}if(O&&E>0&&D&&E!==D.getDate()){u=this._optVal("invalidDay",2);M="dayOfMonth"}E=B.useLastGoodDate?this._goodD:null;if(O&&!D&&!B.nullable){D=E;if(!D||!D.getTime){D=new Date()}else{u=this._optVal("required",2);M="null"}}if(D){if(t>-2){D.setHours((t<0)?0:t)}if(z>-2){D.setMinutes((z<0)?0:z)}if(q>-2){D.setSeconds((q<0)?0:q)}if(l>-2){D.setMilliseconds((l<0)?0:l)}if(N){if(e(D=this._limits(G=D))){D=G}else{if(O){if(!B.minValue){u=this._optVal("max",2).replace("{0}",this._toTxt(B.maxValue))}else{if(!B.maxValue){u=this._optVal("min",2).replace("{0}",this._toTxt(B.minValue))}else{u=this._optVal("range",2).replace("{0}",this._toTxt(B.minValue)).replace("{1}",this._toTxt(B.maxValue))}}M="limit"}}}}if(O){if(x&&!D&&L.length>0&&E){if(!M){u=this._optVal("date",2);M="invalid"}D=E}if(!x&&B.required){u=this._optVal("required",2);M="null"}K.value=D;if(M&&(L||!B.nullable)){if(B.reduceDayOfInvalidDate!==false&&D&&x&&D.getDate()<5&&K.day>27){D.setDate(0);K.value=D}K.text=L;K.reason=M;K.message=u;this._inv=K}}return D},_toTxt:function(o,r,n,h){var l,j,g=-1,p=0,q="",m=r?this._mask:this._mask1,f=r?this._field0IDs:this._field1IDs;if(e(o)){return r?this._getTxt(5,n,h?(this._txt=m):m):""}this.d_s=6;while(++g<m.length){l=m.charAt(g);if((j=m.charCodeAt(g))<22){q+=this._fieldVal(f[p++],o,r,l);if(r){while(g+1<m.length){if(m.charCodeAt(g+1)===j){g++}else{break}}}}else{q+=l}}if(!r){return q}if(h){this._txt=q}return this._getTxt(5,n,q)},_fields1:function(r,s){var n,l,h,o,g=-1,t=-1,f=0,p=[],q=s?this._field0IDs:this._field1IDs;o=q.length;while(++g<o){p[g]=-1}if(e(r)){return p}r=r.toUpperCase();g=-1;while(++g<r.length&&f<o){l=this._jpn(r.charCodeAt(g))-48;h=q[f];if(h===20||h===21){h=q[++f]}if(h===14||h===15){if(l>=0&&l<=9){t=-1;f++;g--;continue}if(this._optVal("pm").charAt(0).toUpperCase()===r.charAt(g)){p[f++]=1;t=-1}}else{if(l>=0&&l<=9){if(t<0){t=l}else{t=t*10+l}}else{if(t>=0){p[f++]=t;t=-1}else{if(h===6||h===7){while(t-->-3){for(l=0;l<12;l++){n=this._optVal((h===6)?"monthNamesShort":"monthNames")[l];n=n.toUpperCase();if((h=n.length)<1){continue}if(t===-3){if(h<4){continue}n=n.substring(0,3)}if((h=r.indexOf(n)-1)>-2){if(h<0||r.charAt(h).toLowerCase()===r.charAt(h)){break}}}if(l<12){p[f++]=l+1;break}}}}}}}if(f<o){p[f]=t}return p},_fields0:function(r){var h,m,l=-1,g=-1,s=-1,f=-1,o=22,p=this._mask,q=[];if(!r){r=""}while(++g<p.length){l++;if((h=p.charCodeAt(g))>21&&o>21){continue}if(h>21){if(f>=0){q[f]=s}}else{if(o>21){s=-1;f++}if(l<r.length){if(h>18){m=this._jpn(r.charCodeAt(l))-48;if(m>=0&&m<=9){if(s<0){s=m}else{s=s*10+m}}else{if(g+1<p.length&&r.charAt(l)===p.charAt(g+1)){l--}}}else{if(o!==h&&this._optVal("pm").charAt(0).toUpperCase()===r.charAt(l).toUpperCase()){s=1}}}}o=h}q[f]=s;return q},_curField:function(l,k){var h,g,j=22,f=this._n0=this._n1=-1;for(h=0;h<k.length;h++){if(((g=k.charCodeAt(h))>21)===(j>21)){continue}if(g>21){if(h>=l){break}}else{this._n0=h;f++}j=g}if(this._n0>=0){this._n1=h}if(e(f=this._field0IDs[f])){return -1}if(f<8){return(f<4)?0:1}if(f<20){return Math.floor((f-4)/2)}return(f>21)?8:-1},_maskKey:function(h,j,p,g,o,m){var f,l=0,q=-1;if(this._type<2){return -2}f=this._curField(o,m);if(o>=this._n1){if(p.charCodeAt(--o)>21){return this._maskKey(h,j,p,g,o+2,m)}}if(f<0){return -1}if(f===5){if(o<=this._n0){q=this._optVal("am");if(q.charAt(0).toUpperCase()!==(j=j.toUpperCase())){q=this._optVal("pm");if(q.charAt(0).toUpperCase()!==j){return -1}}if(this._n1===this._n0+1){q=q.charAt(0)}else{if((g=q.length)<2){q+=" "}else{if(g>2){q=q.substring(0,2)}}}this._txt=p.substring(0,this._n0)+q+p.substring(this._n1)}return this._n1}if(h<48||h>57){if(o===0||(h!==47&&h!==58&&(h<44||h>57))){return -1}if(m.charCodeAt(o-1)>=22||this._n1===g){return o}while(o<g){if(m.charCodeAt(o++)>=22){break}p=p.substring(0,o-1)+m.charAt(o-1)+p.substring(o)}this._txt=p;return o}h-=48;if(this._n0===o){q=p.charCodeAt(o+1)-48;if(f===2){if(h>3){l=1}else{if(h===3&&q>1){l=2}}}else{if(f===6||f===7){if(h>6){l=1}else{if(h===6&&q>0){l=2}}}else{if(f>0&&f<5){if(f===4){h--;q-=2}if(h>1){l=1}else{if(h===1&&q>2){l=2}}}}}}if(this._n0+1===o){q=p.charCodeAt(o-1)-48;if(f===2){if(q>3||(q===3&&h>1)){l=3}}else{if(f===6||f===7){if(q>6||(q===6&&h>0)){l=3}}else{if(f>0&&f<5){if(f===4){q--;h-=2}if(q>1||(q===1&&h>2)){l=3}}}}}if(l===1){p=p.substring(0,o)+m.charAt(o)+p.substring(o+1);o++}if(l===2){p=p.substring(0,o+1)+m.charAt(o+1)+p.substring(o+2)}if(l===3){while(++o<g){if(m.charCodeAt(o)<22){break}}if(o>=g){return -1}return this._maskKey(h+48,j,p,g,o,m)}this._txt=p.substring(0,o)+j+p.substring(o+1);return ++o},_add:function(l,m){var h,g,i,j,k=m.toString(),n=l.toString(),f=l+m;j=f.toString();if((h=n.indexOf("."))<1||(g=j.indexOf("."))<1){return f}if((i=k.indexOf("."))>0){i=k.length-i}if(j.length-g<=(h=Math.max(i,n.length-h))){return f}m=10;while(h-->2){m*=10}return Math.round(f*m)/m},spin:function(l){var h,f,g,k,j=this.options;if(!this._spinList(l)){return this}if(this._type<2){return this}if(this._type>3){if(!(h=this._toNum(this._val()))){h=0}this._set_val(this._add(h,l),this._fcs);return this}g=this._spinField;k=new Date();k.setTime(this._date.getTime());if(g<0||g>8){if(this._fcs===2){this.getSelectedText();g=this._curField(this._sel0,this._mask);if(e(k=this._toDate(this._val(),true,true))){k=new Date()}this._spinField=g}else{this._spinField=g=this.d_s}}if(g===5){l=(l>0)?12:-12}f=j.spin1Field;switch(g){case 0:k.setFullYear(l+=k.getFullYear());if(f&&l!==k.getFullYear()){g=-1}break;case 1:k.setMonth(l+=k.getMonth());if(f&&l!==k.getMonth()){g=-1}break;case 2:k.setDate(l+=k.getDate());if(f&&l!==k.getDate()){g=-1}break;case 3:case 4:case 5:g=k.getDate();k.setHours(l+=k.getHours());if(f&&g!==k.getDate()){g=-1}break;case 6:k.setMinutes(l+=k.getMinutes());if(f&&l!==k.getMinutes()){g=-1}break;case 7:k.setSeconds(l+=k.getSeconds());if(f&&l!==k.getSeconds()){g=-1}break;case 8:for(g=this._n1-this._n0;g++<3;){l*=10}k.setMilliseconds(l+=k.getMilliseconds());if(f&&l!==k.getMilliseconds()){g=-1}break}if(g<0){return this}if(!e(l=this._limits(k))){k=l}this._text=this._toTxt(k,this._fcs===2,j.promptChar,true);this._date=k;this._isNull=false;this._repaint();this.select(this._sel0);if(this._fcs===2){this._last=this._val()}return this},_mode:function(h,f){var g;if(!h||f<1){h=e(h)?((f>3)?1:((f===1)?5:0)):0}else{if(typeof h!=="number"){h=h.toString().toLowerCase();if(f>3){g={text:-1,editmodetext:0,"double":1,"float":2,decimal:3,"long":4,ulong:5,"int":6,uint:7,"short":8,ushort:9,sbyte:10,"byte":11}}else{if(f>1){g={date:0,editmodetext:1,text:2}}else{if(f>0){g={rawtext:0,rawtextwithrequiredprompts:1,rawtextwithallprompts:2,rawtextwithliterals:3,rawtextwithrequiredpromptsandliterals:4,alltext:5}}}}if(e(h=g[h])){h=-2}}}return(h<-1)?((f>3)?1:0):h},_fixMode:function(h){var m,f,i,k,l,n=this._type,j=this.options,g=this._value;this._dataMode=l=this._mode(j.dataMode,n);this._maxLen=j.maxLength;if(n>0&&n<4){if(!j.promptChar){j.promptChar="_"}if(!j.padChar){j.padChar=" "}if(!j.emptyChar){j.emptyChar=" "}if(n===1&&h){n=j.inputMask;this._setMask(n?n:"CCCCCCCCCC")}}if(n<2){if(h===3){this._setVal(g)}return}if(n<4){if(!(f=j.dateInputFormat)){j.dateInputFormat=f="date"}if(!j.yearShift){j.yearShift=0}if(e(j.centuryThreshold)){j.centuryThreshold=29}if(e(j.minNumberOfDateFields)){j.minNumberOfDateFields=3}if(!(i=k=this._optVal(f+"Pattern"))){i=k=f}m=j.dateDisplayFormat;f=m?m:f;if(!(k=this._optVal(f+"Pattern"))){k=f?f:i}i=this._getMask(this._field0IDs=[],i,1);this._mask1=this._getMask(this._field1IDs=[],k);if(h===1){this._date=new Date();this._isNull=false}this._spinField=-1;this.d_s=10;this._setMask(i);if(h!==1&&!this._isNull){this._setVal(this._date,1)}return}if(l>3&&this._maxLen<1){m=3;if(l<6){m=19}else{if(l<8){m=10}else{if(l<10){m=5}}}this._field[0].maxLength=this._maxLen=m+(l+1)%2}if(h===3){this._setVal(g,1)}if(!h&&(g||g===0)){this._setVal(g/this._prop(7))}},_toNum:function(n,l,k){var i,m=null,p=null,g,j=this.options,f=n,h=0;if(typeof n!=="number"){n=d(n);h=n.length;f=parseFloat(this._txtAsNum(n))}if(isNaN(f)){f=null}else{if(!isFinite(f)){f=(f===Number.NEGATIVE_INFINITY)?-Number.MAX_VALUE:Number.MAX_VALUE}}i=l?this._limits(f):f;if(k&&(i!==f||(e(i,1)&&h>0))){k=e(f,1)?((h===0)?"null":"format"):"limit";if(e(f,1)){if(h===0){k="null";g=this._optVal("required",2)}else{k="format";g=this._optVal("number",2)}}else{k="limit";l=null;if(e(m=j.minValue,1)){if(!e(m=this._prop(10),1)){if(m!==i){m=null}}}if(e(p=j.maxValue,1)){if(!e(p=this._prop(11),1)){if(p!==i){p=null}}}g=e(p,1)?this._optVal("min",2).replace("{0}",m.toString(10)):(e(m,1)?this._optVal("max",2).replace("{0}",p.toString(10)):this._optVal("range",2).replace("{0}",m.toString(10)).replace("{1}",p.toString(10)))}this._inv={value:i,text:n,reason:k,message:g}}return i},_txtAsNum:function(g,f,j){var i,h=g.length;if(!f){f=this._prop(4)}if(!j){j=this._prop(3)}while(h-->0){i=g.charCodeAt(h);if(i===12290||i===65294){i="."}else{if(i===12289){i=","}else{if(i>65295&&i<65306){i=String.fromCharCode(i-65248)}else{continue}}}g=g.replace(new RegExp(g.charAt(h),"g"),i)}g=g.replace("(",(g.indexOf(j)<0)?"-":"").replace(this._prop(2),"").replace(new RegExp(j,"g"),"-");g=g.replace(f,"\x01");if((i=g.indexOf(f))>0){g=g.substring(0,i)}g=g.replace(/[^0-9\-eE\x01]/gm,"").replace("\x01",".");h=g.length;if((i=g.indexOf("-"))>=0){if(i+1<h&&(i=g.indexOf("-",i+1))>0){if(i>0&&g.toUpperCase().charAt(i-1)!=="E"){g=g.substring(0,i)}}if(i+1===(h=g.length)){g="-"+g.substring(0,h-1)}}return(g==="-"||g===".")?"":g},_ePow:function(g){var f,h=this.options.scientificFormat;f=(h&&h.length>0)?h.charAt(0):null;return(f&&(f==="e"||f==="E"))?(g?h:f):null},_toTxtNum:function(m,l,t,h,q,s){var p,v,r,g,w,k=this._ePow(),n=0,x=0,o=-1,u=m,f=this._prop(8);if(e(t)){if(e(m,1)){return""}u=m<0;if(u){m=-m}try{t=k?m.toString(10):m.toFixed(f)}catch(j){s=t=d(m)}return this._toTxtNum(u,l,t.toUpperCase(),e(h)?this._prop(3):h,e(q)?this._prop(4):q,s)}if(s){t=this._txtAsNum(t,q)}w=t.indexOf("E");if(w>0){k=k?this._ePow(!l&&t.charAt(w+1)!=="-")+t.substring(w+1):t.substring(w);t=t.substring(0,w)}else{k=""}w=t.length;if(e(u)){if(w===0){return l?t:""}u=this._isMinus(t.charCodeAt(0));if(u){t=t.substring(1);w--}}while(++o<w){g=t.charCodeAt(o);if(g<48||g>57){t=t.substring(0,o)+t.substring(o+1);w--;break}}while(o<w){if(t.charCodeAt(w-1)!==48){break}t=t.substring(0,--w)}w=o;if(f>0&&w<t.length){x=t.length-w;t=t.substring(0,w)+q+t.substring(w);w+=q.length+f}if(w<t.length){t=t.substring(0,w)}if(u&&(!(r=t.replace(/0/g,""))||r===q)){u=false}if((w=this._prop(9))>0){if(x===0){t+=q}while(w-->x){t+="0"}}if(l){t+=k;return u?(h+t):t}p=this._prop(6);r=v=(p.length>0)?p[0]:0;while(r>0&&--o>0){if(--r===0){t=t.substring(0,o)+this._prop(5)+t.substring(o);r=p[++n];if(e(r)||r<1){r=v}else{v=r}}}m=this._prop(u?1:0).replace("n",t+k);return m.replace("$",this._prop(2))},_prop:function(f){var j,g,i,h=this.options,k=this._type,l=this._dataMode;if(f===13){h=h.selectionOnFocus;return(h===-1||h==="select")?-1:((h===0||h==="start")?0:((h===1||h==="end")?1:2))}if(f===12){return(h.maxLength>0)?h.maxLength:this._maxLen}if(f===0){if(!(g=h.positivePattern)){return(k===6)?this._optVal("percentPositivePattern"):((k===5)?this._optVal("currencyPositivePattern"):"n")}return g}if(f===1){if(!(g=h.negativePattern)){return this._optVal((k===6)?"percentNegativePattern":((k===5)?"currencyNegativePattern":"numericNegativePattern"))}return g}if(f===2){if(!e(g=h.symbol)){return g}return(k===6)?this._optVal("percentSymbol"):((k===5)?this._optVal("currencySymbol"):"")}if(f===3){return this._optVal("negativeSign")}if(f===4){if(!(g=h.decimalSeparator)){return this._optVal((k===6)?"percentDecimalSeparator":((k===5)?"currencyDecimalSeparator":"numericDecimalSeparator"))}return g}if(f===5){if(!e(g=h.groupSeparator)){return g}return this._optVal((k===6)?"percentGroupSeparator":((k===5)?"currencyGroupSeparator":"numericGroupSeparator"))}if(f===6){if(!(g=h.groups)){return this._optVal((k===6)?"percentGroups":((k===5)?"currencyGroups":"numericGroups"))}return g}if(f===7){if(!e(g=h.displayFactor)){return g}return(k===6)?this._optVal("percentDisplayFactor"):1}if(f===8){if(l>3){return 0}if(!e(g=h.maxDecimals)){return g}return this._optVal((k===6)?"percentMaxDecimals":((k===5)?"currencyMaxDecimals":"numericMaxDecimals"))}if(f===9){if(l>3){return 0}if(!e(g=h.minDecimals)){return g}return this._optVal((k===6)?"percentMinDecimals":((k===5)?"currencyMinDecimals":"numericMinDecimals"))}j=f===10;if(j||f===11){g=j?h.minValue:h.maxValue;if(k>3&&typeof g==="string"){g=parseFloat(g)}if(!e(g,1)||k<4||l<2||l===3||l>11){return g}if(l===2){return j?-3.40282347e+38:3.40282347e+38}g=127;i=(l%2)===0;if(!i&&j){return 0}if(l<6){g=9.22337203685478e+18}else{if(l<8){g=2147483647}else{if(l<10){g=32767}}}return i?(j?-(g+1):g):(g*2+1)}},_isMinus:function(f){return f===this._prop(3).charCodeAt(0)||f===45||(f===40&&this._prop(1).indexOf("(")>=0)||f===12540||f===65293||f===65288},destroy:function(){var g,j,m,l,h=this._element,f=this._field,k=this.element,n=this._buttons;m=h?h[0]:null;if(!f||!m){return this}this._stopTimer();this._doDP(3);this._initValidator(1);this._listRemove();f.unbind(this._evts);h.unbind(this._mEvts);l=(n&&n[0])?n[0][0]:null;if(l&&l.parentNode===m){m.removeChild(l)}l=(n&&n[1])?n[1][0].parentNode:null;if(l&&l.parentNode===m){m.removeChild(l)}if(f[0].parentNode===m){m.removeChild(f[0])}if(this._selElem){h.remove()}else{if(this._swap){g=m.parentNode;g.insertBefore(k[0],m);g.removeChild(m)}}g=this._oldCss;for(j in g){if(g.hasOwnProperty(j)){k.css(j,g[j])}}g=this._oldAttr;for(j in g){if(g.hasOwnProperty(j)){k[0][j]=g[j]}}k[0]._ig_oldCss=null;k=h=f=this._dp=this._buttons=this._field=this._element=null;this._evts=this._mEvts=this._oldAttr=this._oldCss=this._validator=null;a.Widget.prototype.destroy.apply(this,arguments);return this}});a.extend(a.ui.igEditor,{version:"11.1.20111.2010"});a.ui.igEditor.locale={defaults:{}};a.ui.igEditor.setDefaultCulture=function(f,g){a.ig.regional=a.ig.regional||{};a.ig.regional.defaults=a.extend(a.ig._regional,(typeof f==="string")?a.ig.regional[f]:f);if(!g&&typeof f==="string"&&a.ui.igEditor.locale[f]){g=f}if(g){a.ui.igEditor.locale.defaults=a.extend({},(typeof g==="string")?a.ui.igEditor.locale[g]:g)}if(f==="en"||f==="en-US"){f=""}if(a.datepicker&&a.datepicker.regional&&a.datepicker.regional[f]){a.datepicker.setDefaults(a.datepicker.regional[f])}};a.widget("ui.igTextEditor",a.ui.igEditor,{_create:function(){a.ui.igEditor.prototype._create.apply(this,[0])}});a.widget("ui.igMaskEditor",a.ui.igEditor,{options:{inputMask:"CCCCCCCCCC",promptChar:"_",padChar:" ",emptyChar:" ",dataMode:"alltext",hideMaskOnFocus:false},_create:function(){a.ui.igEditor.prototype._create.apply(this,[1])}});a.widget("ui.igDateEditor",a.ui.igEditor,{options:{spin1Field:false,minValue:null,maxValue:null,dateDisplayFormat:null,dateInputFormat:null,promptChar:"_",dataMode:"date",minNumberOfDateFields:3,useLastGoodDate:false,reduceDayOfInvalidDate:true,hideMaskOnFocus:false,centuryThreshold:29,yearShift:0},_create:function(){a.ui.igEditor.prototype._create.apply(this,[2])}});a.widget("ui.igDatePicker",a.ui.igDateEditor,{options:{button:"dropdown",datepickerOptions:null},_create:function(){a.ui.igEditor.prototype._create.apply(this,[3])}});a.widget("ui.igNumericEditor",a.ui.igEditor,{options:{positivePattern:null,negativePattern:null,symbol:null,negativeSign:null,decimalSeparator:null,groupSeparator:null,groups:null,displayFactor:null,maxDecimals:null,minDecimals:null,minValue:null,maxValue:null,scientificFormat:null,nullValue:null,dataMode:"double"},_create:function(){a.ui.igEditor.prototype._create.apply(this,[4])}});a.widget("ui.igCurrencyEditor",a.ui.igNumericEditor,{_create:function(){a.ui.igEditor.prototype._create.apply(this,[5])}});a.widget("ui.igPercentEditor",a.ui.igNumericEditor,{_create:function(){a.ui.igEditor.prototype._create.apply(this,[6])}})}(jQuery));(function(a){a.ig.regional["en-US"]={monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],am:"AM",pm:"PM",datePattern:"M/d/yyyy",dateLongPattern:"dddd, MMMM dd, yyyy",dateTimePattern:"M/d/yyyy h:mm tt",timePattern:"h:mm tt",timeLongPattern:"h:mm:ss tt",negativeSign:"-",numericNegativePattern:"-$n",numericDecimalSeparator:".",numericGroupSeparator:",",numericGroups:[3],numericMaxDecimals:2,numericMinDecimals:0,currencyPositivePattern:"$n",currencyNegativePattern:"$(n)",currencySymbol:"$",currencyDecimalSeparator:".",currencyGroupSeparator:",",currencyGroups:[3],currencyMaxDecimals:2,currencyMinDecimals:2,percentPositivePattern:"n$",percentNegativePattern:"-n$",percentSymbol:"%",percentDecimalSeparator:".",percentGroupSeparator:",",percentGroups:[3],percentDisplayFactor:100,percentMaxDecimals:2,percentMinDecimals:2};a.ig.setRegionalDefault("en-US")}(jQuery));(function(a){a.ui.igEditor.locale["en-US"]={spinUpperTitle:"Increment",spinLowerTitle:"Decrement",buttonTitle:"Show list",clearTitle:"Clear value",datePickerButtonTitle:"Show calendar"};a.ui.igEditor.locale.defaults=a.extend({},a.ui.igEditor.locale["en-US"])}(jQuery));jQuery(function(a){a.ui.igValidator.locale.en={defaultMessage:"Please fix this field",selectMessage:"Please select a value",rangeSelectMessage:"Please select no more than {0} and not less than {1} items",minSelectMessage:"Please select at least {0} items",maxSelectMessage:"Please select no more than {0} items",rangeLengthMessage:"Please enter a value between {0} and {1} characters long",minLengthMessage:"Please enter at least {0} characters",maxLengthMessage:"Please enter no more than {0} characters",requiredMessage:"This field is required",maskMessage:"Please fill all required positions",dateFieldsMessage:"Please enter values in date fields",invalidDayMessage:"Invalid day of month. Please enter correct day",dateMessage:"Please enter a valid date",numberMessage:"Please enter a valid number",rangeMessage:"Please enter a value between {0} and {1}",minMessage:"Please enter a value greater than or equal to {0}",maxMessage:"Please enter a value less than or equal to {0}"};a.ui.igValidator.setDefaultCulture("en")});